<!DOCTYPE html>
<html lang="en">
  <head>
    <title>ActionEnumProperties  Reference</title>
    <link rel="stylesheet" type="text/css" href="css/jazzy.css" />
    <link rel="stylesheet" type="text/css" href="css/highlight.css" />
    <meta charset='utf-8'>
    <script src="js/jquery.min.js" defer></script>
    <script src="js/jazzy.js" defer></script>
    
    <script src="js/lunr.min.js" defer></script>
    <script src="js/typeahead.jquery.js" defer></script>
    <script src="js/jazzy.search.js" defer></script>
  </head>
  <body>
    <a title="ActionEnumProperties  Reference"></a>
    <header>
      <div class="content-wrapper">
        <p><a href="index.html">CombineRex 0.8.2 Docs</a> (43% documented)</p>
        <p class="header-right"><a href="https://github.com/SwiftRex/SwiftRex"><img src="img/gh.png"/>View on GitHub</a></p>
        <p class="header-right">
          <form role="search" action="search.json">
            <input type="text" placeholder="Search documentation" data-typeahead>
          </form>
        </p>
      </div>
    </header>
    <div class="content-wrapper">
      <p id="breadcrumbs">
        <a href="index.html">CombineRex Reference</a>
        <img id="carat" src="img/carat.png" />
        ActionEnumProperties  Reference
      </p>
    </div>
    <div class="content-wrapper">
      <nav class="sidebar">
        <ul class="nav-groups">
          <li class="nav-group-name">
            <a href="Guides.html">Guides</a>
            <ul class="nav-group-tasks">
              <li class="nav-group-task">
                <a href="actionenumproperties.html">ActionEnumProperties</a>
              </li>
              <li class="nav-group-task">
                <a href="combinerex.html">CombineRex</a>
              </li>
              <li class="nav-group-task">
                <a href="quickguide.html">QuickGuide</a>
              </li>
              <li class="nav-group-task">
                <a href="reactiveswiftrex.html">ReactiveSwiftRex</a>
              </li>
              <li class="nav-group-task">
                <a href="rxswiftrex.html">RxSwiftRex</a>
              </li>
              <li class="nav-group-task">
                <a href="statemanagement.html">StateManagement</a>
              </li>
              <li class="nav-group-task">
                <a href="swiftrex.html">SwiftRex</a>
              </li>
              <li class="nav-group-task">
                <a href="uikitlifetimemanagement.html">UIKitLifetimeManagement</a>
              </li>
            </ul>
          </li>
          <li class="nav-group-name">
            <a href="Classes.html">Classes</a>
            <ul class="nav-group-tasks">
              <li class="nav-group-task">
                <a href="Classes/EffectMiddleware.html">EffectMiddleware</a>
              </li>
              <li class="nav-group-task">
                <a href="Classes/ObservableViewModel.html">ObservableViewModel</a>
              </li>
            </ul>
          </li>
          <li class="nav-group-name">
            <a href="Extensions.html">Extensions</a>
            <ul class="nav-group-tasks">
              <li class="nav-group-task">
                <a href="Extensions/Cancellable.html">Cancellable</a>
              </li>
              <li class="nav-group-task">
                <a href="Extensions/MiddlewareReader.html">MiddlewareReader</a>
              </li>
              <li class="nav-group-task">
                <a href="Extensions/PassthroughSubject.html">PassthroughSubject</a>
              </li>
              <li class="nav-group-task">
                <a href="Extensions/Publisher.html">Publisher</a>
              </li>
              <li class="nav-group-task">
                <a href="Extensions/PublisherType.html">PublisherType</a>
              </li>
              <li class="nav-group-task">
                <a href="Extensions/ReplayLastSubjectType.html">ReplayLastSubjectType</a>
              </li>
              <li class="nav-group-task">
                <a href="Extensions/Set.html">Set</a>
              </li>
              <li class="nav-group-task">
                <a href="Extensions/StoreType.html">StoreType</a>
              </li>
              <li class="nav-group-task">
                <a href="Extensions/Subscriber.html">Subscriber</a>
              </li>
              <li class="nav-group-task">
                <a href="Extensions/SubscriberType.html">SubscriberType</a>
              </li>
              <li class="nav-group-task">
                <a href="Extensions/SubscriptionType.html">SubscriptionType</a>
              </li>
              <li class="nav-group-task">
                <a href="Extensions/SwiftRex.html">SwiftRex</a>
              </li>
              <li class="nav-group-task">
                <a href="Extensions/SwiftRex/SubjectType.html">– SubjectType</a>
              </li>
              <li class="nav-group-task">
                <a href="Extensions/SwiftRex/SubscriptionType.html">– SubscriptionType</a>
              </li>
            </ul>
          </li>
          <li class="nav-group-name">
            <a href="Structs.html">Structures</a>
            <ul class="nav-group-tasks">
              <li class="nav-group-task">
                <a href="Structs/Effect.html">Effect</a>
              </li>
              <li class="nav-group-task">
                <a href="Structs/FireAndForget.html">FireAndForget</a>
              </li>
            </ul>
          </li>
          <li class="nav-group-name">
            <a href="Typealiases.html">Type Aliases</a>
            <ul class="nav-group-tasks">
              <li class="nav-group-task">
                <a href="Typealiases.html#/s:10CombineRex22SimpleEffectMiddlewarea">SimpleEffectMiddleware</a>
              </li>
              <li class="nav-group-task">
                <a href="Typealiases.html#/s:10CombineRex27SymmetricalEffectMiddlewarea">SymmetricalEffectMiddleware</a>
              </li>
            </ul>
          </li>
        </ul>
      </nav>
      <article class="main-content">
        <section>
          <section class="section">
            
            <h1 id='action-enum-properties' class='heading'>Action Enum Properties</h1>

<p>Because enums in Swift don&rsquo;t have KeyPath as structs, we strongly recommend you to create enum properties for every case, so you can easily traverse enum trees as well as reading associated values. There are several ways to create enum properties, either manually or using code generation tools.</p>

<p>Having Action enum properties will be very beneficial when lifting actions, specially when extracting a possible local action out of an AppAction for example:</p>
<pre class="highlight swift"><code><span class="c1">// Instead of</span>
<span class="o">.</span><span class="nf">lift</span><span class="p">(</span><span class="nv">action</span><span class="p">:</span> <span class="p">{</span> <span class="p">(</span><span class="nv">globalAction</span><span class="p">:</span> <span class="kt">AppAction</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kt">LocalAction</span><span class="p">?</span> <span class="k">in</span> 
    <span class="k">if</span> <span class="k">case</span> <span class="kd">let</span> <span class="o">.</span><span class="nf">localActionEnumCase</span><span class="p">(</span><span class="n">localAction</span><span class="p">)</span> <span class="o">=</span> <span class="n">globalAction</span> <span class="p">{</span> <span class="k">return</span> <span class="n">localAction</span> <span class="p">}</span>
    <span class="k">return</span> <span class="kc">nil</span>
<span class="p">})</span>

<span class="c1">// You can do</span>
<span class="o">.</span><span class="nf">lift</span><span class="p">(</span><span class="nv">action</span><span class="p">:</span> <span class="p">{</span> <span class="nv">$0</span><span class="o">.</span><span class="n">localActionEnumCase</span> <span class="p">})</span>

<span class="c1">// Or even</span>
<span class="o">.</span><span class="nf">lift</span><span class="p">(</span><span class="nv">action</span><span class="p">:</span> <span class="p">\</span><span class="o">.</span><span class="n">localActionEnumCase</span><span class="p">)</span>
</code></pre>

<p>So the shape <code>(AppAction) -&gt; LocalAction?</code> can be used as a simple <code>\AppAction.enumProperty</code> KeyPath, usually inferred to <code>\.enumProperty</code>. It&rsquo;s not only a matter of syntax sugar, it&rsquo;s a way to avoid opening closures that can contain bugs, typos, mistakes.
KeyPaths are compile-checked, and if you use code-generation for creating the enum properties, you reduce enormously the error possibility.</p>

<p>Please notice that these key-paths always return Optional, that&rsquo;s because enum cases are mutually exclusive, and when extracting a local from a global, we return nil whenever the current instance has a different case. If you want to learn more about the Mathematics behind this, please look for <code>Functional Programming Optics: Prism</code> on your favourite search engine. :)</p>

<hr>
<h2 id='manually' class='heading'>Manually</h2>

<p>An enum property will always return the Optional value of the case&rsquo;s associated value (or Optional<Void> for cases without associated values), and setter will do the opposite. For example.</p>
<pre class="highlight swift"><code><span class="kd">enum</span> <span class="kt">AppAction</span> <span class="p">{</span>
    <span class="k">case</span> <span class="n">started</span>
    <span class="k">case</span> <span class="nf">movie</span><span class="p">(</span><span class="kt">MovieAction</span><span class="p">)</span>
    <span class="k">case</span> <span class="nf">sayHello</span><span class="p">(</span><span class="kt">String</span><span class="p">,</span> <span class="kt">String</span><span class="p">)</span>
<span class="p">}</span>

<span class="c1">// Boilerplate enum property</span>
<span class="kd">extension</span> <span class="kt">AppAction</span> <span class="p">{</span>
    <span class="kd">public</span> <span class="k">var</span> <span class="nv">started</span><span class="p">:</span> <span class="kt">Void</span><span class="p">?</span> <span class="p">{</span>
        <span class="k">guard</span> <span class="k">case</span> <span class="o">.</span><span class="n">started</span> <span class="o">=</span> <span class="k">self</span> <span class="k">else</span> <span class="p">{</span> <span class="k">return</span> <span class="kc">nil</span> <span class="p">}</span>
        <span class="nf">return</span> <span class="p">()</span>
    <span class="p">}</span>

    <span class="k">var</span> <span class="nv">movie</span><span class="p">:</span> <span class="kt">MovieAction</span><span class="p">?</span> <span class="p">{</span>
        <span class="k">get</span> <span class="p">{</span>
            <span class="k">guard</span> <span class="k">case</span> <span class="kd">let</span> <span class="o">.</span><span class="nf">movie</span><span class="p">(</span><span class="n">value</span><span class="p">)</span> <span class="o">=</span> <span class="k">self</span> <span class="k">else</span> <span class="p">{</span> <span class="k">return</span> <span class="kc">nil</span> <span class="p">}</span>
            <span class="k">return</span> <span class="n">value</span>
        <span class="p">}</span>
        <span class="k">set</span> <span class="p">{</span>
            <span class="k">guard</span> <span class="k">case</span> <span class="o">.</span><span class="n">movie</span> <span class="o">=</span> <span class="k">self</span><span class="p">,</span> <span class="k">let</span> <span class="nv">newValue</span> <span class="o">=</span> <span class="n">newValue</span> <span class="k">else</span> <span class="p">{</span> <span class="k">return</span> <span class="p">}</span>
            <span class="k">self</span> <span class="o">=</span> <span class="o">.</span><span class="nf">movie</span><span class="p">(</span><span class="n">newValue</span><span class="p">)</span>
        <span class="p">}</span>
    <span class="p">}</span>

    <span class="k">var</span> <span class="nv">sayHello</span><span class="p">:</span> <span class="p">(</span><span class="kt">String</span><span class="p">,</span> <span class="kt">String</span><span class="p">)?</span> <span class="p">{</span>
        <span class="k">get</span> <span class="p">{</span>
            <span class="k">guard</span> <span class="k">case</span> <span class="kd">let</span> <span class="o">.</span><span class="nf">sayHello</span><span class="p">(</span><span class="n">value1</span><span class="p">,</span> <span class="n">value2</span><span class="p">)</span> <span class="o">=</span> <span class="k">self</span> <span class="k">else</span> <span class="p">{</span> <span class="k">return</span> <span class="kc">nil</span> <span class="p">}</span>
            <span class="nf">return</span> <span class="p">(</span><span class="n">value1</span><span class="p">,</span> <span class="n">value2</span><span class="p">)</span>
        <span class="p">}</span>
        <span class="k">set</span> <span class="p">{</span>
            <span class="k">guard</span> <span class="k">case</span> <span class="o">.</span><span class="n">sayHello</span> <span class="o">=</span> <span class="k">self</span><span class="p">,</span> <span class="k">let</span> <span class="p">(</span><span class="nv">value1</span><span class="p">,</span> <span class="nv">value2</span><span class="p">)</span> <span class="o">=</span> <span class="n">newValue</span> <span class="k">else</span> <span class="p">{</span> <span class="k">return</span> <span class="p">}</span>
            <span class="k">self</span> <span class="o">=</span> <span class="o">.</span><span class="nf">sayHello</span><span class="p">(</span><span class="n">value1</span><span class="p">,</span> <span class="n">value2</span><span class="p">)</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre>

<p>As you can see, &ldquo;started&rdquo; case doesn&rsquo;t have associated values, so no need for setter and also the getter will be of type <code>Void?</code>, which means <code>Void</code> in case that instance is <code>AppAction.started</code> or <code>nil</code> in case it&rsquo;s anything else. When the enum case has associated values, one or many, this should be returned as result for the getter (a single type or a tuple), or <code>nil</code> if the instance has a different case.</p>

<hr>
<h2 id='xcode-code-snippets' class='heading'>Xcode Code Snippets</h2>

<p>You can do that manually or using Xcode Code Snippets, as the ones below.</p>

<p>Xcode Code Snippet for cases with associated values (it can be downloaded from <a href="CodeSnippet/PrismAssociatedValue.codesnippet">here</a> and saved into ~/Library/Developer/Xcode/UserData/CodeSnippets):</p>
<pre class="highlight swift"><code><span class="kd">extension</span> <span class="o">&lt;</span><span class="err">#</span><span class="kt">ActionName</span><span class="err">#</span><span class="o">&gt;</span> <span class="p">{</span>
    <span class="kd">public</span> <span class="kd">var</span> <span class="o">&lt;</span><span class="err">#</span><span class="n">actionCase</span><span class="err">#</span><span class="o">&gt;</span><span class="p">:</span> <span class="o">&lt;</span><span class="err">#</span><span class="kt">AssociatedValueTypeOrTuple</span><span class="err">#</span><span class="o">&gt;</span><span class="p">?</span> <span class="p">{</span>
        <span class="k">get</span> <span class="p">{</span>
            <span class="k">guard</span> <span class="k">case</span> <span class="kd">let</span> <span class="o">.&lt;</span><span class="err">#</span><span class="n">actionCase</span><span class="err">#</span><span class="o">&gt;</span><span class="p">(</span><span class="n">value</span><span class="p">)</span> <span class="o">=</span> <span class="k">self</span> <span class="k">else</span> <span class="p">{</span> <span class="k">return</span> <span class="kc">nil</span> <span class="p">}</span>
            <span class="k">return</span> <span class="n">value</span>
        <span class="p">}</span>
        <span class="k">set</span> <span class="p">{</span>
            <span class="k">guard</span> <span class="k">case</span> <span class="o">.&lt;</span><span class="err">#</span><span class="n">actionCase</span><span class="err">#</span><span class="o">&gt;</span> <span class="o">=</span> <span class="k">self</span><span class="p">,</span> <span class="k">let</span> <span class="nv">newValue</span> <span class="o">=</span> <span class="n">newValue</span> <span class="k">else</span> <span class="p">{</span> <span class="k">return</span> <span class="p">}</span>
            <span class="k">self</span> <span class="o">=</span> <span class="o">.&lt;</span><span class="err">#</span><span class="n">actionCase</span><span class="err">#</span><span class="o">&gt;</span><span class="p">(</span><span class="n">newValue</span><span class="p">)</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre>

<p>Xcode Code Snippet for cases with no associated value (it can be downloaded from <a href="CodeSnippet/PrismVoid.codesnippet">here</a> and saved into ~/Library/Developer/Xcode/UserData/CodeSnippets):</p>
<pre class="highlight swift"><code><span class="kd">extension</span> <span class="o">&lt;</span><span class="err">#</span><span class="kt">ActionName</span><span class="err">#</span><span class="o">&gt;</span> <span class="p">{</span>
    <span class="kd">public</span> <span class="kd">var</span> <span class="o">&lt;</span><span class="err">#</span><span class="n">actionCase</span><span class="err">#</span><span class="o">&gt;</span><span class="p">:</span> <span class="kt">Void</span><span class="p">?</span> <span class="p">{</span>
        <span class="k">guard</span> <span class="k">case</span> <span class="o">.&lt;</span><span class="err">#</span><span class="n">actionCase</span><span class="err">#</span><span class="o">&gt;</span> <span class="o">=</span> <span class="k">self</span> <span class="k">else</span> <span class="p">{</span> <span class="k">return</span> <span class="kc">nil</span> <span class="p">}</span>
        <span class="nf">return</span> <span class="p">()</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre>

<hr>
<h2 id='sourcery' class='heading'>Sourcery</h2>

<p>Another option is using <a href="https://github.com/krzysztofzablocki/Sourcery">Sourcery</a>, <a href="SourceryTemplates/Prism.stencil">the template is available here</a>. You can run Sourcery using this template by simply annotating your enums with <code>// sourcery: Prism</code> comment, as seen below:</p>
<pre class="highlight swift"><code><span class="c1">// sourcery: Prism</span>
<span class="kd">enum</span> <span class="kt">AppAction</span> <span class="p">{</span>
    <span class="k">case</span> <span class="n">started</span>
    <span class="k">case</span> <span class="nf">movie</span><span class="p">(</span><span class="kt">MovieAction</span><span class="p">)</span>
    <span class="k">case</span> <span class="nf">sayHello</span><span class="p">(</span><span class="kt">String</span><span class="p">,</span> <span class="kt">String</span><span class="p">)</span>
<span class="p">}</span>
</code></pre>

<p>Sourcery will then create the file <code>Prism.generated.swift</code> that must be added to your project. You can easily add this as a build step to Xcode so the enum properties will get refreshed every time you add a new case or a new sub-Action.</p>

<p>This is the way we recommend and a full example can be seen on <a href="https://github.com/SwiftRex/SwiftRexMonitor/tree/master/SwiftRexMonitor">SwiftMonitor project</a>.</p>

<hr>
<h2 id='other-options' class='heading'>Other options</h2>

<p><a href="https://github.com/pointfreeco/swift-enum-properties">Enum Properties</a> project is a code generator solution only for Enum Properties problem, but it creates the extensions inline side-by-side with the enum itself, disturbing the development process. Because Sourcery is more powerful, can be used for more situations, and creates an external file, we would recommend using that instead.</p>

<p>A last option is using <a href="https://github.com/pointfreeco/swift-case-paths">Case Paths library</a>, which creates an enum KeyPath syntax for any enum automatically. Although the easiest one and compatible with SwiftRex, we don&rsquo;t recommend that solution for relying on Reflection/Introspection techniques, that could come with some performance implications. Code generated solution will always be the most optimizes way as you transfer the processing time from app runtime to build times.</p>

          </section>
        </section>
        <section id="footer">
          <p>&copy; 2021 <a class="link" href="https://github.com/SwiftRex/SwiftRex" target="_blank" rel="external">SwiftRex</a>. All rights reserved. (Last updated: 2021-03-06)</p>
          <p>Generated by <a class="link" href="https://github.com/realm/jazzy" target="_blank" rel="external">jazzy ♪♫ v0.13.6</a>, a <a class="link" href="https://realm.io" target="_blank" rel="external">Realm</a> project.</p>
        </section>
      </article>
    </div>
  </body>
</div>
</html>
