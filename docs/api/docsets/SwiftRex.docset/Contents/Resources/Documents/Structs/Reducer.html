<!DOCTYPE html>
<html lang="en">
  <head>
    <title>Reducer Structure Reference</title>
    <link rel="stylesheet" type="text/css" href="../css/jazzy.css" />
    <link rel="stylesheet" type="text/css" href="../css/highlight.css" />
    <meta charset='utf-8'>
    <script src="../js/jquery.min.js" defer></script>
    <script src="../js/jazzy.js" defer></script>
    
  </head>
  <body>
    <a name="//apple_ref/swift/Struct/Reducer" class="dashAnchor"></a>
    <a title="Reducer Structure Reference"></a>
    <header>
      <div class="content-wrapper">
        <p><a href="../index.html">SwiftRex Docs</a> (100% documented)</p>
        <p class="header-right"><a href="https://github.com/SwiftRex/SwiftRex"><img src="../img/gh.png"/>View on GitHub</a></p>
      </div>
    </header>
    <div class="content-wrapper">
      <p id="breadcrumbs">
        <a href="../index.html">SwiftRex Reference</a>
        <img id="carat" src="../img/carat.png" />
        Reducer Structure Reference
      </p>
    </div>
    <div class="content-wrapper">
      <nav class="sidebar">
        <ul class="nav-groups">
          <li class="nav-group-name">
            <a href="../Store%20%28contracts%29.html">Store (contracts)</a>
            <ul class="nav-group-tasks">
              <li class="nav-group-task">
                <a href="../Protocols/StateProvider.html">StateProvider</a>
              </li>
            </ul>
          </li>
          <li class="nav-group-name">
            <a href="../Store%20%28basic%20implementation%29.html">Store (basic implementation)</a>
            <ul class="nav-group-tasks">
              <li class="nav-group-task">
                <a href="../Protocols/ActionHandler.html">ActionHandler</a>
              </li>
            </ul>
          </li>
          <li class="nav-group-name">
            <a href="../Reducer.html">Reducer</a>
            <ul class="nav-group-tasks">
              <li class="nav-group-task">
                <a href="../Structs/Reducer.html">Reducer</a>
              </li>
            </ul>
          </li>
          <li class="nav-group-name">
            <a href="../Middleware%20%28basics%29.html">Middleware (basics)</a>
            <ul class="nav-group-tasks">
              <li class="nav-group-task">
                <a href="../Protocols/Middleware.html">Middleware</a>
              </li>
              <li class="nav-group-task">
                <a href="../Classes/ComposedMiddleware.html">ComposedMiddleware</a>
              </li>
              <li class="nav-group-task">
                <a href="../Middleware%20%28basics%29.html#/s:8SwiftRex2lgoiyAA18ComposedMiddlewareCy15InputActionTypeQz06OutputgH0Qz05StateH0QzGx_q_tAA0E0RzAaLR_AEQy_AFRSAGQy_AHRSAIQy_AJRSr0_lF">&lt;&gt;(_:_:)</a>
              </li>
              <li class="nav-group-task">
                <a href="../Classes/AnyMiddleware.html">AnyMiddleware</a>
              </li>
            </ul>
          </li>
          <li class="nav-group-name">
            <a href="../Composition%20helpers.html">Composition helpers</a>
            <ul class="nav-group-tasks">
              <li class="nav-group-task">
                <a href="../Protocols/Monoid.html">Monoid</a>
              </li>
            </ul>
          </li>
          <li class="nav-group-name">
            <a href="../Closure%20type-aliases.html">Closure type-aliases</a>
            <ul class="nav-group-tasks">
              <li class="nav-group-task">
                <a href="../Closure%20type-aliases.html#/s:8SwiftRex8GetStatea">GetState</a>
              </li>
              <li class="nav-group-task">
                <a href="../Closure%20type-aliases.html#/s:8SwiftRex14ReduceFunctiona">ReduceFunction</a>
              </li>
            </ul>
          </li>
          <li class="nav-group-name">
            <a href="../Other%20Classes.html">Other Classes</a>
            <ul class="nav-group-tasks">
              <li class="nav-group-task">
                <a href="../Classes/IdentityMiddleware.html">IdentityMiddleware</a>
              </li>
              <li class="nav-group-task">
                <a href="../Classes/LiftMiddleware.html">LiftMiddleware</a>
              </li>
              <li class="nav-group-task">
                <a href="../Classes/PipelineMiddleware.html">PipelineMiddleware</a>
              </li>
              <li class="nav-group-task">
                <a href="../Classes/ReduxStoreBase.html">ReduxStoreBase</a>
              </li>
            </ul>
          </li>
          <li class="nav-group-name">
            <a href="../Other%20Protocols.html">Other Protocols</a>
            <ul class="nav-group-tasks">
              <li class="nav-group-task">
                <a href="../Protocols/ReduxStoreProtocol.html">ReduxStoreProtocol</a>
              </li>
              <li class="nav-group-task">
                <a href="../Protocols/Semigroup.html">Semigroup</a>
              </li>
              <li class="nav-group-task">
                <a href="../Protocols/StoreType.html">StoreType</a>
              </li>
              <li class="nav-group-task">
                <a href="../Protocols/SubscriptionCollection.html">SubscriptionCollection</a>
              </li>
              <li class="nav-group-task">
                <a href="../Protocols/SubscriptionType.html">SubscriptionType</a>
              </li>
            </ul>
          </li>
          <li class="nav-group-name">
            <a href="../Other%20Structs.html">Other Structures</a>
            <ul class="nav-group-tasks">
              <li class="nav-group-task">
                <a href="../Structs/MiddlewareContext.html">MiddlewareContext</a>
              </li>
              <li class="nav-group-task">
                <a href="../Structs/PublisherType.html">PublisherType</a>
              </li>
              <li class="nav-group-task">
                <a href="../Structs/ReduxPipelineWrapper.html">ReduxPipelineWrapper</a>
              </li>
              <li class="nav-group-task">
                <a href="../Structs/ReplayLastSubjectType.html">ReplayLastSubjectType</a>
              </li>
              <li class="nav-group-task">
                <a href="../Structs/ShouldEmitValue.html">ShouldEmitValue</a>
              </li>
              <li class="nav-group-task">
                <a href="../Structs/SubjectType.html">SubjectType</a>
              </li>
              <li class="nav-group-task">
                <a href="../Structs/SubscriberType.html">SubscriberType</a>
              </li>
              <li class="nav-group-task">
                <a href="../Structs/ViewStore.html">ViewStore</a>
              </li>
            </ul>
          </li>
          <li class="nav-group-name">
            <a href="../Other%20Typealiases.html">Other Type Aliases</a>
            <ul class="nav-group-tasks">
              <li class="nav-group-task">
                <a href="../Other%20Typealiases.html#/s:8SwiftRex4Nexta">Next</a>
              </li>
              <li class="nav-group-task">
                <a href="../Other%20Typealiases.html#/s:8SwiftRex23UnfailablePublisherTypea">UnfailablePublisherType</a>
              </li>
              <li class="nav-group-task">
                <a href="../Other%20Typealiases.html#/s:8SwiftRex31UnfailableReplayLastSubjectTypea">UnfailableReplayLastSubjectType</a>
              </li>
              <li class="nav-group-task">
                <a href="../Other%20Typealiases.html#/s:8SwiftRex17UnfailableSubjecta">UnfailableSubject</a>
              </li>
              <li class="nav-group-task">
                <a href="../Other%20Typealiases.html#/s:8SwiftRex24UnfailableSubscriberTypea">UnfailableSubscriberType</a>
              </li>
            </ul>
          </li>
        </ul>
      </nav>
      <article class="main-content">
        <section>
          <section class="section">
            <h1>Reducer</h1>
              <div class="declaration">
                <div class="language">
                  <pre class="highlight swift"><code><span class="kd">public</span> <span class="kd">struct</span> <span class="kt">Reducer</span><span class="o">&lt;</span><span class="kt">ActionType</span><span class="p">,</span> <span class="kt">StateType</span><span class="o">&gt;</span></code></pre>

                </div>
              </div>
            <p>âš™ <code>Reducer</code> is a pure function wrapped in a monoid container, that takes an action and the current state to calculate
the new state.</p>

<p>The <code><a href="../Protocols/Middleware.html">Middleware</a></code> pipeline will be notified about actions, or even trigger new ones, but what they can NOT do is
changing the app state. Middlewares have read-only access to the up-to-date state of our apps, but when mutations are
required we must use the <code>Reducer</code> function:</p>
<pre class="highlight swift"><code><span class="p">(</span><span class="kt">ActionType</span><span class="p">,</span> <span class="kt">StateType</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kt">StateType</span>
</code></pre>

<p>Given an action and the current state, returns the calculated state. This function will be executed in the last stage
of an action handling, when all middlewares had the chance to read the action and start their own side-effects.</p>

<p>It&rsquo;s important to understand that reducer is a synchronous operations that calculates a new state without any kind of
side-effect, so never add properties to the <code>Reducer</code> structs or call any external function. If you are tempted to do
that, please create a middleware. Reducers are also responsible for keeping the consistency of a state, so it&rsquo;s always
good to do a final sanity check before changing the state, like for example check other dependant properties that must
be changed together.</p>

<p>Once the reducer function executes, the store will update its single source of truth with the new calculated state,
and propagate it to all its observers, that will react to the new state and update Views, for example.</p>

<p>This function is wrapped in a struct to overcome some Swift limitations, for example, allowing us to compose multiple
reducers into one (monoid operation, where two or more reducers become a single one) or lifting reducers from local
types to global types. The ability to lift reducers allow us to create small reducers, specialized in parts of our
state only, written in different frameworks and modules, and later plugged into a bigger state and action handler by
providing a way to map state and actions between the global and local ones. For more information about that, please
check the functions <code>lift(actionGetter:stateGetter:stateSetter:)</code> and <code>lift(action:state:)</code>.</p>

<p>A possible implementation of a reducer would be:</p>
<pre class="highlight swift"><code><span class="k">let</span> <span class="nv">volumeReducer</span> <span class="o">=</span> <span class="kt">Reducer</span><span class="o">&lt;</span><span class="kt">VolumeAction</span><span class="p">,</span> <span class="kt">VolumeState</span><span class="o">&gt;</span> <span class="o">=</span> <span class="p">{</span> <span class="n">action</span><span class="p">,</span> <span class="n">currentState</span> <span class="k">in</span>
    <span class="k">switch</span> <span class="n">action</span> <span class="p">{</span>
    <span class="k">case</span> <span class="o">.</span><span class="nv">louder</span><span class="p">:</span>
        <span class="k">return</span> <span class="kt">VolumeState</span><span class="p">(</span>
            <span class="nv">isMute</span><span class="p">:</span> <span class="n">currentState</span><span class="o">.</span><span class="n">isMute</span><span class="p">,</span>
            <span class="nv">volume</span><span class="p">:</span> <span class="nf">min</span><span class="p">(</span><span class="mi">100</span><span class="p">,</span> <span class="n">currentState</span><span class="o">.</span><span class="n">volume</span> <span class="o">+</span> <span class="mi">5</span><span class="p">)</span>
        <span class="p">)</span>
    <span class="k">case</span> <span class="o">.</span><span class="nv">quieter</span><span class="p">:</span>
        <span class="k">return</span> <span class="kt">VolumeState</span><span class="p">(</span>
            <span class="nv">isMute</span><span class="p">:</span> <span class="n">currentState</span><span class="o">.</span><span class="n">isMute</span><span class="p">,</span>
            <span class="nv">volume</span><span class="p">:</span> <span class="nf">max</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">currentState</span><span class="o">.</span><span class="n">volume</span> <span class="o">-</span> <span class="mi">5</span><span class="p">)</span>
        <span class="p">)</span>
    <span class="k">case</span> <span class="o">.</span><span class="nv">toggleMute</span><span class="p">:</span>
        <span class="k">return</span> <span class="kt">VolumeState</span><span class="p">(</span>
            <span class="nv">isMute</span><span class="p">:</span> <span class="o">!</span><span class="n">currentState</span><span class="o">.</span><span class="n">isMute</span><span class="p">,</span>
            <span class="nv">volume</span><span class="p">:</span> <span class="n">currentState</span><span class="o">.</span><span class="n">volume</span>
        <span class="p">)</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre>

<p>Please notice from the example above the following good practices:</p>

<ul>
<li>No <code>DispatchQueue</code>, threading, operation queue, promises, reactive code in there</li>
<li>All you need to implement this function is provided by the arguments <code>action</code> and <code>currentState</code>, don&rsquo;t use any other
variable coming from global scope, not even for reading purposes. If you need something else, it should be in the state</li>
<li>Do not start side-effects, requests, I/O, database calls</li>
<li>Avoid <code>default</code> when writing <code>switch</code>/<code>case</code> statements. That way the compiler will help you more</li>
<li>Make the action and the state generic parameters as much specialized as you can. If volume state is part of a bigger
state, you should not be tempted to pass the whole big state into this reducer. Make it short, brief and specialized,
this also helps preventing <code>default</code> case or having to re-assign properties that are never mutated by this reducer.</li>
</ul>

          </section>
          <section class="section task-group-section">
            <div class="task-group">
              <ul>
                <li class="item">
                  <div>
                    <code>
                    <a name="/s:8SwiftRex7ReducerV6reduceyq_x_q_tcvp"></a>
                    <a name="//apple_ref/swift/Property/reduce" class="dashAnchor"></a>
                    <a class="token" href="#/s:8SwiftRex7ReducerV6reduceyq_x_q_tcvp">reduce</a>
                    </code>
                  </div>
                  <div class="height-container">
                    <div class="pointer-container"></div>
                    <section class="section">
                      <div class="pointer"></div>
                      <div class="abstract">
                        <p>Execute the wrapped reduce function. You must provide the parameters <code>action: ActionType</code> (the action to be
evaluated during the reducing process) and the latest <code>state: StateType</code> (the current state in your single
source-of-truth). The result of this call will be a <code>StateType</code> with the calculated new state.</p>

                      </div>
                      <div class="declaration">
                        <h4>Declaration</h4>
                        <div class="language">
                          <p class="aside-title">Swift</p>
                          <pre class="highlight swift"><code><span class="kd">public</span> <span class="k">let</span> <span class="nv">reduce</span><span class="p">:</span> <span class="kt"><a href="../Closure%20type-aliases.html#/s:8SwiftRex14ReduceFunctiona">ReduceFunction</a></span><span class="o">&lt;</span><span class="kt">ActionType</span><span class="p">,</span> <span class="kt">StateType</span><span class="o">&gt;</span></code></pre>

                        </div>
                      </div>
                    </section>
                  </div>
                </li>
                <li class="item">
                  <div>
                    <code>
                    <a name="/s:8SwiftRex7ReducerVyACyxq_Gq_x_q_tccfc"></a>
                    <a name="//apple_ref/swift/Method/init(_:)" class="dashAnchor"></a>
                    <a class="token" href="#/s:8SwiftRex7ReducerVyACyxq_Gq_x_q_tccfc">init(_:)</a>
                    </code>
                  </div>
                  <div class="height-container">
                    <div class="pointer-container"></div>
                    <section class="section">
                      <div class="pointer"></div>
                      <div class="abstract">
                        <p>Reducer initializer takes only the underlying function <code>(ActionType, StateType) -&gt; StateType</code> that is the reducer
function itself.</p>

                      </div>
                      <div class="declaration">
                        <h4>Declaration</h4>
                        <div class="language">
                          <p class="aside-title">Swift</p>
                          <pre class="highlight swift"><code><span class="kd">public</span> <span class="nf">init</span><span class="p">(</span><span class="n">_</span> <span class="nv">reduce</span><span class="p">:</span> <span class="kd">@escaping</span> <span class="kt"><a href="../Closure%20type-aliases.html#/s:8SwiftRex14ReduceFunctiona">ReduceFunction</a></span><span class="o">&lt;</span><span class="kt">ActionType</span><span class="p">,</span> <span class="kt">StateType</span><span class="o">&gt;</span><span class="p">)</span></code></pre>

                        </div>
                      </div>
                      <div>
                        <h4>Parameters</h4>
                        <table class="graybox">
                          <tbody>
                            <tr>
                              <td>
                                <code>
                                <em>reduce</em>
                                </code>
                              </td>
                              <td>
                                <div>
                                  <p>a pure function that is gonna be wrapped in a monoid container, and that calculates the new state from
    an action and the old state.</p>
                                </div>
                              </td>
                            </tr>
                          </tbody>
                        </table>
                      </div>
                    </section>
                  </div>
                </li>
              </ul>
            </div>
            <div class="task-group">
              <ul>
                <li class="item">
                  <div>
                    <code>
                    <a name="/s:8SwiftRex7ReducerV8identityACyxq_GvpZ"></a>
                    <a name="//apple_ref/swift/Variable/identity" class="dashAnchor"></a>
                    <a class="token" href="#/s:8SwiftRex7ReducerV8identityACyxq_GvpZ">identity</a>
                    </code>
                  </div>
                  <div class="height-container">
                    <div class="pointer-container"></div>
                    <section class="section">
                      <div class="pointer"></div>
                      <div class="abstract">
                        <p>Neutral monoidal container. Composing any monoid with an <code>identity</code> monoid should result in a function unchanged,
regardless if the identity element is on the left-hand side or the right-hand side or this composition.</p>

<p>Therefore:</p>
<pre class="highlight swift"><code>   <span class="kt">Reducer</span><span class="o">&lt;</span><span class="kt">ActionType</span><span class="p">,</span> <span class="kt">StateType</span><span class="o">&gt;</span> <span class="o">&lt;&gt;</span> <span class="o">.</span><span class="n">identity</span>
<span class="o">==</span> <span class="o">.</span><span class="n">identity</span> <span class="o">&lt;&gt;</span> <span class="kt">Reducer</span><span class="o">&lt;</span><span class="kt">ActionType</span><span class="p">,</span> <span class="kt">StateType</span><span class="o">&gt;</span>
<span class="o">==</span> <span class="kt">Reducer</span><span class="o">&lt;</span><span class="kt">ActionType</span><span class="p">,</span> <span class="kt">StateType</span><span class="o">&gt;</span>
</code></pre>

<p>The implementation of this reducer, as one should expect, simply ignores the action and returns the state unchanged</p>

                      </div>
                      <div class="declaration">
                        <h4>Declaration</h4>
                        <div class="language">
                          <p class="aside-title">Swift</p>
                          <pre class="highlight swift"><code><span class="kd">public</span> <span class="kd">static</span> <span class="k">var</span> <span class="nv">identity</span><span class="p">:</span> <span class="kt">Reducer</span><span class="o">&lt;</span><span class="kt">ActionType</span><span class="p">,</span> <span class="kt">StateType</span><span class="o">&gt;</span> <span class="p">{</span> <span class="k">get</span> <span class="p">}</span></code></pre>

                        </div>
                      </div>
                    </section>
                  </div>
                </li>
                <li class="item">
                  <div>
                    <code>
                    <a name="/s:8SwiftRex7ReducerV2lgoiyACyxq_GAE_AEtFZ"></a>
                    <a name="//apple_ref/swift/Method/&lt;&gt;(_:_:)" class="dashAnchor"></a>
                    <a class="token" href="#/s:8SwiftRex7ReducerV2lgoiyACyxq_GAE_AEtFZ">&lt;&gt;(_:_:)</a>
                    </code>
                  </div>
                  <div class="height-container">
                    <div class="pointer-container"></div>
                    <section class="section">
                      <div class="pointer"></div>
                      <div class="abstract">
                        <p>Monoid Append operation. Allows to compose two reducers into one, keeping in mind that the order of the composition
DOES matter. When composing reducer A with reducer B, when an action X arrives, first it will be forwarded to
reducer A together with the initial state. This reducer may return a slightly (or completely) changed state from
that operation, and this state will then be forwarded to reducer B together with the same action X. If you change
the order, results may vary as you can imagine. Monoids don&rsquo;t necessarily hold the commutative axiom, although
sometimes they do. What they necessarily hold is the associativity axiom, which means that if you compose A and B,
and later C, it&rsquo;s exactly the same as if you compose A to a previously composed B and C:
<code>(A &lt;&gt; B) &lt;&gt; C == A &lt;&gt; (B &lt;&gt; C)</code>. So please don&rsquo;t worry about surrounding your reducers with parenthesis:</p>
<pre class="highlight swift"><code><span class="k">let</span> <span class="nv">globalReducer</span> <span class="o">=</span> <span class="n">firstReducer</span> <span class="o">&lt;&gt;</span> <span class="n">secondReducer</span> <span class="o">&lt;&gt;</span> <span class="n">thirdReducer</span> <span class="o">&lt;&gt;</span> <span class="n">andSoOn</span>
</code></pre>

                      </div>
                      <div class="declaration">
                        <h4>Declaration</h4>
                        <div class="language">
                          <p class="aside-title">Swift</p>
                          <pre class="highlight swift"><code><span class="kd">public</span> <span class="kd">static</span> <span class="kd">func</span> <span class="o">&lt;&gt;</span> <span class="p">(</span><span class="nv">lhs</span><span class="p">:</span> <span class="kt">Reducer</span><span class="o">&lt;</span><span class="kt">ActionType</span><span class="p">,</span> <span class="kt">StateType</span><span class="o">&gt;</span><span class="p">,</span> <span class="nv">rhs</span><span class="p">:</span> <span class="kt">Reducer</span><span class="o">&lt;</span><span class="kt">ActionType</span><span class="p">,</span> <span class="kt">StateType</span><span class="o">&gt;</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kt">Reducer</span><span class="o">&lt;</span><span class="kt">ActionType</span><span class="p">,</span> <span class="kt">StateType</span><span class="o">&gt;</span></code></pre>

                        </div>
                      </div>
                      <div>
                        <h4>Parameters</h4>
                        <table class="graybox">
                          <tbody>
                            <tr>
                              <td>
                                <code>
                                <em>lhs</em>
                                </code>
                              </td>
                              <td>
                                <div>
                                  <p>First monoid <code>(ActionType, StateType) -&gt; StateType</code>, let&rsquo;s call it <code>f(x)</code></p>
                                </div>
                              </td>
                            </tr>
                            <tr>
                              <td>
                                <code>
                                <em>rhs</em>
                                </code>
                              </td>
                              <td>
                                <div>
                                  <p>Second monoid <code>(ActionType, StateType) -&gt; StateType</code>, let&rsquo;s call it <code>g(x)</code></p>
                                </div>
                              </td>
                            </tr>
                          </tbody>
                        </table>
                      </div>
                      <div>
                        <h4>Return Value</h4>
                        <p>a composed monoid <code>(ActionType, StateType) -&gt; StateType</code> equivalent to <code>g(f(x))</code></p>
                      </div>
                    </section>
                  </div>
                </li>
              </ul>
            </div>
            <div class="task-group">
              <ul>
                <li class="item">
                  <div>
                    <code>
                    <a name="/s:8SwiftRex7ReducerV4lift12actionGetter05stateF00G6SetterACyqd__qd_0_GxSgqd__c_q_qd_0_cyqd_0_z_q_tctr0_lF"></a>
                    <a name="//apple_ref/swift/Method/lift(actionGetter:stateGetter:stateSetter:)" class="dashAnchor"></a>
                    <a class="token" href="#/s:8SwiftRex7ReducerV4lift12actionGetter05stateF00G6SetterACyqd__qd_0_GxSgqd__c_q_qd_0_cyqd_0_z_q_tctr0_lF">lift(actionGetter:stateGetter:stateSetter:)</a>
                    </code>
                  </div>
                  <div class="height-container">
                    <div class="pointer-container"></div>
                    <section class="section">
                      <div class="pointer"></div>
                      <div class="abstract">
                        <p>A type-lifting method. The global state of your app is <em>Whole</em>, and the <code>Reducer</code> handles <em>Part</em>, that is a
sub-state.</p>

<p>Let&rsquo;s suppose you may want to have a <code>gpsReducer</code> that knows about the following <code>struct</code>:</p>
<pre class="highlight swift"><code><span class="kd">struct</span> <span class="kt">Location</span> <span class="p">{</span>
   <span class="k">let</span> <span class="nv">latitude</span><span class="p">:</span> <span class="kt">Double</span>
   <span class="k">let</span> <span class="nv">longitude</span><span class="p">:</span> <span class="kt">Double</span>
<span class="p">}</span>
</code></pre>

<p>Let&rsquo;s call it <em>Part</em>. Both, this state and its reducer will be part of an external framework, used by dozens of
apps. Internally probably the <code>Reducer</code> will receive some known <code>ActionType</code> and calculate a new location. On the
main app we have a global state, that we now call <em>Whole</em>.</p>
<pre class="highlight swift"><code><span class="kd">struct</span> <span class="kt">MyGlobalState</span> <span class="p">{</span>
   <span class="k">let</span> <span class="nv">title</span><span class="p">:</span> <span class="kt">String</span><span class="p">?</span>
   <span class="k">let</span> <span class="nv">listOfItems</span><span class="p">:</span> <span class="p">[</span><span class="kt">Item</span><span class="p">]</span>
   <span class="k">let</span> <span class="nv">currentLocation</span><span class="p">:</span> <span class="kt">Location</span>
<span class="p">}</span>
</code></pre>

<p>As expected, <em>Part</em> (<code>Location</code>) is a property of <em>Whole</em> (<code>MyGlobalState</code>). This relationship could be less
direct, for example there could be several levels of properties until you find the <em>Part</em> in the <em>Whole</em>, like
<code>global.firstLevel.secondLevel.currentLocation</code>, but let&rsquo;s keep it a single-level for this example.</p>

<p>Because our <code>Store</code> understands <em>Whole</em> (<code>MyGlobalState</code>) and our <code>gpsReducer</code> understands <em>Part</em> (<code>Location</code>), we
must <code>lift</code> the <code>Reducer</code> to the <em>Whole</em> level, by using:</p>
<pre class="highlight swift"><code><span class="k">let</span> <span class="nv">globalStateReducer</span> <span class="o">=</span> <span class="n">gpsReducer</span><span class="o">.</span><span class="nf">lift</span><span class="p">(</span><span class="nv">actionGetter</span><span class="p">:</span> <span class="p">{</span> <span class="nv">$0</span> <span class="p">},</span>
                                         <span class="nv">stateGetter</span><span class="p">:</span> <span class="p">{</span> <span class="n">global</span> <span class="k">in</span> <span class="k">return</span> <span class="n">global</span><span class="o">.</span><span class="n">currentLocation</span> <span class="p">},</span>
                                         <span class="nv">stateSetter</span><span class="p">:</span> <span class="p">{</span> <span class="n">global</span><span class="p">,</span> <span class="n">part</span> <span class="k">in</span> <span class="n">global</span><span class="o">.</span><span class="n">currentLocation</span> <span class="o">=</span> <span class="n">path</span> <span class="p">})</span>
</code></pre>

<p>Now this reducer can be used within our <code>Store</code> or even composed with others. It also can be used in other apps as
long as we have a way to lift it to the world of <em>Whole</em>.</p>

<p>Same strategy works for the <code>action</code>, as you can guess by the <code>actionGetter</code> parameter. You can provide a function
that takes a global action (<em>Whole</em>) and returns an optional local action (<em>Part</em>). It&rsquo;s optional because perhaps
you want to ignore actions that are not relevant for this reducer.</p>

                      </div>
                      <div class="declaration">
                        <h4>Declaration</h4>
                        <div class="language">
                          <p class="aside-title">Swift</p>
                          <pre class="highlight swift"><code><span class="kd">public</span> <span class="kd">func</span> <span class="n">lift</span><span class="o">&lt;</span><span class="kt">GlobalActionType</span><span class="p">,</span> <span class="kt">GlobalStateType</span><span class="o">&gt;</span><span class="p">(</span>
    <span class="nv">actionGetter</span><span class="p">:</span> <span class="kd">@escaping</span> <span class="p">(</span><span class="kt">GlobalActionType</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kt">ActionType</span><span class="p">?,</span>
    <span class="nv">stateGetter</span><span class="p">:</span> <span class="kd">@escaping</span> <span class="p">(</span><span class="kt">GlobalStateType</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kt">StateType</span><span class="p">,</span>
    <span class="nv">stateSetter</span><span class="p">:</span> <span class="kd">@escaping</span> <span class="p">(</span><span class="k">inout</span> <span class="kt">GlobalStateType</span><span class="p">,</span> <span class="kt">StateType</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kt">Void</span><span class="p">)</span>
    <span class="o">-&gt;</span> <span class="kt">Reducer</span><span class="o">&lt;</span><span class="kt">GlobalActionType</span><span class="p">,</span> <span class="kt">GlobalStateType</span><span class="o">&gt;</span></code></pre>

                        </div>
                      </div>
                      <div>
                        <h4>Parameters</h4>
                        <table class="graybox">
                          <tbody>
                            <tr>
                              <td>
                                <code>
                                <em>actionGetter</em>
                                </code>
                              </td>
                              <td>
                                <div>
                                  <p>a way to convert a global action into a local action, but it&rsquo;s optional because maybe this
          reducer shouldn&rsquo;t care about certain actions. Because actions are usually enums, you can switch
          over the enum and in case it&rsquo;s nothing you care about, you simply return nil in the closure. If
          you don&rsquo;t want to lift this reducer in terms of <code>action</code>, just provide the identity function
          <code>{ $0 }</code> as input.</p>
                                </div>
                              </td>
                            </tr>
                            <tr>
                              <td>
                                <code>
                                <em>stateGetter</em>
                                </code>
                              </td>
                              <td>
                                <div>
                                  <p>a way to read from a global state and extract only the part that it&rsquo;s relevant for this reducer,
         by traversing the tree of the global state until you find the property you want, for example:
         <code>{ $0.currentGame.scoreBoard }</code></p>
                                </div>
                              </td>
                            </tr>
                            <tr>
                              <td>
                                <code>
                                <em>stateSetter</em>
                                </code>
                              </td>
                              <td>
                                <div>
                                  <p>a way to write back into the global state once you finished reducing the <em>Part</em>, so now you have
         a new part that was calculated by this reducer and you want to set it into the global state, also
         provided as the first parameter as an <code>inout</code> property:
         <code>{ globalState, newScoreBoard in globalState.currentGame.scoreBoard = newScoreBoard }</code></p>
                                </div>
                              </td>
                            </tr>
                          </tbody>
                        </table>
                      </div>
                      <div>
                        <h4>Return Value</h4>
                        <p>a <code>Reducer&lt;GlobalAction, GlobalState&gt;</code> that maps actions and states from the original specialized
       reducer into a more generic and global reducer, to be used in a larger context.</p>
                      </div>
                    </section>
                  </div>
                </li>
                <li class="item">
                  <div>
                    <code>
                    <a name="/s:8SwiftRex7ReducerV4lift6action5stateACyqd__qd_0_Gs7KeyPathCyqd__xSgG_s08WritablegH0Cyqd_0_q_Gtr0_lF"></a>
                    <a name="//apple_ref/swift/Method/lift(action:state:)" class="dashAnchor"></a>
                    <a class="token" href="#/s:8SwiftRex7ReducerV4lift6action5stateACyqd__qd_0_Gs7KeyPathCyqd__xSgG_s08WritablegH0Cyqd_0_q_Gtr0_lF">lift(action:state:)</a>
                    </code>
                  </div>
                  <div class="height-container">
                    <div class="pointer-container"></div>
                    <section class="section">
                      <div class="pointer"></div>
                      <div class="abstract">
                        <p>A type-lifting method. The global state of your app is <em>Whole</em>, and the <code>Reducer</code> handles <em>Part</em>, that is a
sub-state.</p>

<p>Let&rsquo;s suppose you may want to have a <code>gpsReducer</code> that knows about the following <code>struct</code>:</p>
<pre class="highlight swift"><code><span class="kd">struct</span> <span class="kt">Location</span> <span class="p">{</span>
   <span class="k">let</span> <span class="nv">latitude</span><span class="p">:</span> <span class="kt">Double</span>
   <span class="k">let</span> <span class="nv">longitude</span><span class="p">:</span> <span class="kt">Double</span>
<span class="p">}</span>
</code></pre>

<p>Let&rsquo;s call it <em>Part</em>. Both, this state and its reducer will be part of an external framework, used by dozens of
apps. Internally probably the <code>Reducer</code> will receive some known <code>ActionType</code> and calculate a new location. On the
main app we have a global state, that we now call <em>Whole</em>.</p>
<pre class="highlight swift"><code><span class="kd">struct</span> <span class="kt">MyGlobalState</span> <span class="p">{</span>
   <span class="k">let</span> <span class="nv">title</span><span class="p">:</span> <span class="kt">String</span><span class="p">?</span>
   <span class="k">let</span> <span class="nv">listOfItems</span><span class="p">:</span> <span class="p">[</span><span class="kt">Item</span><span class="p">]</span>
   <span class="k">let</span> <span class="nv">currentLocation</span><span class="p">:</span> <span class="kt">Location</span>
<span class="p">}</span>
</code></pre>

<p>As expected, <em>Part</em> (<code>Location</code>) is a property of <em>Whole</em> (<code>MyGlobalState</code>). This relationship could be less
direct, for example there could be several levels of properties until you find the <em>Part</em> in the <em>Whole</em>, like
<code>global.firstLevel.secondLevel.currentLocation</code>, but let&rsquo;s keep it a single-level for this example.</p>

<p>Because our <code>Store</code> understands <em>Whole</em> (<code>MyGlobalState</code>) and our <code>gpsReducer</code> understands <em>Part</em> (<code>Location</code>), we
must <code>lift</code> the <code>Reducer</code> to the <em>Whole</em> level, by using:</p>
<pre class="highlight swift"><code><span class="k">let</span> <span class="nv">globalStateReducer</span> <span class="o">=</span> <span class="n">gpsReducer</span><span class="o">.</span><span class="nf">lift</span><span class="p">(</span><span class="nv">action</span><span class="p">:</span> <span class="err">\</span><span class="o">.</span><span class="n">locationActions</span><span class="p">,</span>
                                         <span class="nv">state</span><span class="p">:</span> <span class="err">\</span><span class="o">.</span><span class="n">currentLocation</span><span class="p">)</span>
</code></pre>

<p>Now this reducer can be used within our <code>Store</code> or even composed with others. It also can be used in other apps as
long as we have a way to lift it to the world of <em>Whole</em>.</p>

<p>Same strategy works for the <code>action</code>, as you can guess by the <code>action</code> parameter. You can provide a key-path that
traverses from a global action (<em>Whole</em>) and to an optional local action (<em>Part</em>). It&rsquo;s optional because perhaps
you want to ignore actions that are not relevant for this reducer.</p>

                      </div>
                      <div class="declaration">
                        <h4>Declaration</h4>
                        <div class="language">
                          <p class="aside-title">Swift</p>
                          <pre class="highlight swift"><code><span class="kd">public</span> <span class="kd">func</span> <span class="n">lift</span><span class="o">&lt;</span><span class="kt">GlobalActionType</span><span class="p">,</span> <span class="kt">GlobalStateType</span><span class="o">&gt;</span><span class="p">(</span>
    <span class="nv">action</span><span class="p">:</span> <span class="kt">KeyPath</span><span class="o">&lt;</span><span class="kt">GlobalActionType</span><span class="p">,</span> <span class="kt">ActionType</span><span class="p">?</span><span class="o">&gt;</span><span class="p">,</span>
    <span class="nv">state</span><span class="p">:</span> <span class="kt">WritableKeyPath</span><span class="o">&lt;</span><span class="kt">GlobalStateType</span><span class="p">,</span> <span class="kt">StateType</span><span class="o">&gt;</span><span class="p">)</span>
    <span class="o">-&gt;</span> <span class="kt">Reducer</span><span class="o">&lt;</span><span class="kt">GlobalActionType</span><span class="p">,</span> <span class="kt">GlobalStateType</span><span class="o">&gt;</span></code></pre>

                        </div>
                      </div>
                      <div>
                        <h4>Parameters</h4>
                        <table class="graybox">
                          <tbody>
                            <tr>
                              <td>
                                <code>
                                <em>action</em>
                                </code>
                              </td>
                              <td>
                                <div>
                                  <p>a read-only key-path from global action into a local action, but it&rsquo;s optional because maybe this
    reducer shouldn&rsquo;t care about certain actions. Because actions are usually enums, you can switch over
    the enum and in case it&rsquo;s nothing you care about, you simply return nil in the closure. If you don&rsquo;t
    want to lift this reducer in terms of <code>action</code>, just remove this parameter from the call.</p>
                                </div>
                              </td>
                            </tr>
                            <tr>
                              <td>
                                <code>
                                <em>state</em>
                                </code>
                              </td>
                              <td>
                                <div>
                                  <p>a writable key-path from global state that traverses into a local state, by extracting only the part
   that it&rsquo;s relevant for this reducer. This will also be used to set the new local state into the global
   state once the reducer finishes it&rsquo;s operation. For example: <code>\.currentGame.scoreBoard</code>.</p>
                                </div>
                              </td>
                            </tr>
                          </tbody>
                        </table>
                      </div>
                      <div>
                        <h4>Return Value</h4>
                        <p>a <code>Reducer&lt;GlobalAction, GlobalState&gt;</code> that maps actions and states from the original specialized
       reducer into a more generic and global reducer, to be used in a larger context.</p>
                      </div>
                    </section>
                  </div>
                </li>
                <li class="item">
                  <div>
                    <code>
                    <a name="/s:8SwiftRex7ReducerV4lift5stateACyxqd__Gs15WritableKeyPathCyqd__q_G_tlF"></a>
                    <a name="//apple_ref/swift/Method/lift(state:)" class="dashAnchor"></a>
                    <a class="token" href="#/s:8SwiftRex7ReducerV4lift5stateACyxqd__Gs15WritableKeyPathCyqd__q_G_tlF">lift(state:)</a>
                    </code>
                  </div>
                  <div class="height-container">
                    <div class="pointer-container"></div>
                    <section class="section">
                      <div class="pointer"></div>
                      <div class="abstract">
                        <p>A type-lifting method. The global state of your app is <em>Whole</em>, and the <code>Reducer</code> handles <em>Part</em>, that is a
sub-state.</p>

<p>Let&rsquo;s suppose you may want to have a <code>gpsReducer</code> that knows about the following <code>struct</code>:</p>
<pre class="highlight swift"><code><span class="kd">struct</span> <span class="kt">Location</span> <span class="p">{</span>
   <span class="k">let</span> <span class="nv">latitude</span><span class="p">:</span> <span class="kt">Double</span>
   <span class="k">let</span> <span class="nv">longitude</span><span class="p">:</span> <span class="kt">Double</span>
<span class="p">}</span>
</code></pre>

<p>Let&rsquo;s call it <em>Part</em>. Both, this state and its reducer will be part of an external framework, used by dozens of
apps. Internally probably the <code>Reducer</code> will receive some known <code>ActionType</code> and calculate a new location. On the
main app we have a global state, that we now call <em>Whole</em>.</p>
<pre class="highlight swift"><code><span class="kd">struct</span> <span class="kt">MyGlobalState</span> <span class="p">{</span>
   <span class="k">let</span> <span class="nv">title</span><span class="p">:</span> <span class="kt">String</span><span class="p">?</span>
   <span class="k">let</span> <span class="nv">listOfItems</span><span class="p">:</span> <span class="p">[</span><span class="kt">Item</span><span class="p">]</span>
   <span class="k">let</span> <span class="nv">currentLocation</span><span class="p">:</span> <span class="kt">Location</span>
<span class="p">}</span>
</code></pre>

<p>As expected, <em>Part</em> (<code>Location</code>) is a property of <em>Whole</em> (<code>MyGlobalState</code>). This relationship could be less
direct, for example there could be several levels of properties until you find the <em>Part</em> in the <em>Whole</em>, like
<code>global.firstLevel.secondLevel.currentLocation</code>, but let&rsquo;s keep it a single-level for this example.</p>

<p>Because our <code>Store</code> understands <em>Whole</em> (<code>MyGlobalState</code>) and our <code>gpsReducer</code> understands <em>Part</em> (<code>Location</code>), we
must <code>lift</code> the <code>Reducer</code> to the <em>Whole</em> level, by using:</p>
<pre class="highlight swift"><code><span class="k">let</span> <span class="nv">globalStateReducer</span> <span class="o">=</span> <span class="n">gpsReducer</span><span class="o">.</span><span class="nf">lift</span><span class="p">(</span><span class="nv">state</span><span class="p">:</span> <span class="err">\</span><span class="o">.</span><span class="n">currentLocation</span><span class="p">)</span>
</code></pre>

<p>Now this reducer can be used within our <code>Store</code> or even composed with others. It also can be used in other apps as
long as we have a way to lift it to the world of <em>Whole</em>.</p>

<p>Same strategy works for the <code>action</code>, just check the other available signatures for <code>lift</code> function.</p>

                      </div>
                      <div class="declaration">
                        <h4>Declaration</h4>
                        <div class="language">
                          <p class="aside-title">Swift</p>
                          <pre class="highlight swift"><code><span class="o">/</span>    <span class="kd">public</span> <span class="kd">func</span> <span class="n">lift</span><span class="o">&lt;</span><span class="kt">GlobalStateType</span><span class="o">&gt;</span><span class="p">(</span>
  <span class="nv">state</span><span class="p">:</span> <span class="kt">WritableKeyPath</span><span class="o">&lt;</span><span class="kt">GlobalStateType</span><span class="p">,</span> <span class="kt">StateType</span><span class="o">&gt;</span><span class="p">)</span>
  <span class="o">-&gt;</span> <span class="kt">Reducer</span><span class="o">&lt;</span><span class="kt">ActionType</span><span class="p">,</span> <span class="kt">GlobalStateType</span><span class="o">&gt;</span></code></pre>

                        </div>
                      </div>
                      <div>
                        <h4>Parameters</h4>
                        <table class="graybox">
                          <tbody>
                            <tr>
                              <td>
                                <code>
                                <em>state</em>
                                </code>
                              </td>
                              <td>
                                <div>
                                  <p>a writable key-path from global state that traverses into a local state, by extracting only the part
   that it&rsquo;s relevant for this reducer. This will also be used to set the new local state into the global
   state once the reducer finishes it&rsquo;s operation. For example: <code>\.currentGame.scoreBoard</code>.</p>
                                </div>
                              </td>
                            </tr>
                          </tbody>
                        </table>
                      </div>
                      <div>
                        <h4>Return Value</h4>
                        <p>a <code>Reducer&lt;ActionType, GlobalState&gt;</code> that maps actions and states from the original specialized
       reducer into a more generic and global reducer, to be used in a larger context.</p>
                      </div>
                    </section>
                  </div>
                </li>
                <li class="item">
                  <div>
                    <code>
                    <a name="/s:8SwiftRex7ReducerV4lift6actionACyqd__q_Gs7KeyPathCyqd__xSgG_tlF"></a>
                    <a name="//apple_ref/swift/Method/lift(action:)" class="dashAnchor"></a>
                    <a class="token" href="#/s:8SwiftRex7ReducerV4lift6actionACyqd__q_Gs7KeyPathCyqd__xSgG_tlF">lift(action:)</a>
                    </code>
                  </div>
                  <div class="height-container">
                    <div class="pointer-container"></div>
                    <section class="section">
                      <div class="pointer"></div>
                      <div class="abstract">
                        <p>A type-lifting method. The global state of your app is <em>Whole</em>, and the <code>Reducer</code> handles <em>Part</em>, that is a
sub-state.</p>

<p>Let&rsquo;s suppose you may want to have a <code>gpsReducer</code> that knows about the following <code>struct</code>:</p>
<pre class="highlight swift"><code><span class="kd">struct</span> <span class="kt">Location</span> <span class="p">{</span>
   <span class="k">let</span> <span class="nv">latitude</span><span class="p">:</span> <span class="kt">Double</span>
   <span class="k">let</span> <span class="nv">longitude</span><span class="p">:</span> <span class="kt">Double</span>
<span class="p">}</span>
</code></pre>

<p>Let&rsquo;s call it <em>Part</em>. Both, this state and its reducer will be part of an external framework, used by dozens of
apps. Internally probably the <code>Reducer</code> will receive some known <code>ActionType</code> and calculate a new location. On the
main app we have a global state, that we now call <em>Whole</em>.</p>
<pre class="highlight swift"><code><span class="kd">struct</span> <span class="kt">MyGlobalState</span> <span class="p">{</span>
   <span class="k">let</span> <span class="nv">title</span><span class="p">:</span> <span class="kt">String</span><span class="p">?</span>
   <span class="k">let</span> <span class="nv">listOfItems</span><span class="p">:</span> <span class="p">[</span><span class="kt">Item</span><span class="p">]</span>
   <span class="k">let</span> <span class="nv">currentLocation</span><span class="p">:</span> <span class="kt">Location</span>
<span class="p">}</span>
</code></pre>

<p>As expected, <em>Part</em> (<code>Location</code>) is a property of <em>Whole</em> (<code>MyGlobalState</code>). This relationship could be less
direct, for example there could be several levels of properties until you find the <em>Part</em> in the <em>Whole</em>, like
<code>global.firstLevel.secondLevel.currentLocation</code>, but let&rsquo;s keep it a single-level for this example.</p>

<p>Because our <code>Store</code> understands <em>Whole</em> (<code>MyGlobalState</code>) and our <code>gpsReducer</code> understands <em>Part</em> (<code>Location</code>), we
must <code>lift</code> the <code>Reducer</code> to the <em>Whole</em> level, by using:</p>
<pre class="highlight swift"><code><span class="k">let</span> <span class="nv">globalStateReducer</span> <span class="o">=</span> <span class="n">gpsReducer</span><span class="o">.</span><span class="nf">lift</span><span class="p">(</span><span class="nv">action</span><span class="p">:</span> <span class="err">\</span><span class="o">.</span><span class="n">locationActions</span><span class="p">)</span>
</code></pre>

<p>Now this reducer can be used within our <code>Store</code> or even composed with others. It also can be used in other apps as
long as we have a way to lift it to the world of <em>Whole</em>.</p>

<p>Same strategy works for the <code>action</code>, as you can guess by the <code>action</code> parameter. You can provide a key-path that
traverses from a global action (<em>Whole</em>) and to an optional local action (<em>Part</em>). It&rsquo;s optional because perhaps
you want to ignore actions that are not relevant for this reducer.</p>

                      </div>
                      <div class="declaration">
                        <h4>Declaration</h4>
                        <div class="language">
                          <p class="aside-title">Swift</p>
                          <pre class="highlight swift"><code><span class="kd">public</span> <span class="kd">func</span> <span class="n">lift</span><span class="o">&lt;</span><span class="kt">GlobalActionType</span><span class="o">&gt;</span><span class="p">(</span>
    <span class="nv">action</span><span class="p">:</span> <span class="kt">KeyPath</span><span class="o">&lt;</span><span class="kt">GlobalActionType</span><span class="p">,</span> <span class="kt">ActionType</span><span class="p">?</span><span class="o">&gt;</span><span class="p">)</span>
    <span class="o">-&gt;</span> <span class="kt">Reducer</span><span class="o">&lt;</span><span class="kt">GlobalActionType</span><span class="p">,</span> <span class="kt">StateType</span><span class="o">&gt;</span></code></pre>

                        </div>
                      </div>
                      <div>
                        <h4>Parameters</h4>
                        <table class="graybox">
                          <tbody>
                            <tr>
                              <td>
                                <code>
                                <em>action</em>
                                </code>
                              </td>
                              <td>
                                <div>
                                  <p>a read-only key-path from global action into a local action, but it&rsquo;s optional because maybe this
    reducer shouldn&rsquo;t care about certain actions. Because actions are usually enums, you can switch over
    the enum and in case it&rsquo;s nothing you care about, you simply return nil in the closure. If you don&rsquo;t
    want to lift this reducer in terms of <code>action</code>, just remove this parameter from the call.</p>
                                </div>
                              </td>
                            </tr>
                          </tbody>
                        </table>
                      </div>
                      <div>
                        <h4>Return Value</h4>
                        <p>a <code>Reducer&lt;GlobalAction, StateType&gt;</code> that maps actions and states from the original specialized
       reducer into a more generic and global reducer, to be used in a larger context.</p>
                      </div>
                    </section>
                  </div>
                </li>
              </ul>
            </div>
          </section>
        </section>
        <section id="footer">
          <p>&copy; 2019 <a class="link" href="https://github.com/SwiftRex/SwiftRex" target="_blank" rel="external">SwiftRex</a>. All rights reserved. (Last updated: 2019-12-01)</p>
          <p>Generated by <a class="link" href="https://github.com/realm/jazzy" target="_blank" rel="external">jazzy â™ªâ™« v0.11.2</a>, a <a class="link" href="https://realm.io" target="_blank" rel="external">Realm</a> project.</p>
        </section>
      </article>
    </div>
  </body>
</div>
</html>
