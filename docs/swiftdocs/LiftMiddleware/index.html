<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SwiftRex - LiftMiddleware</title>
    <link rel="stylesheet" type="text/css" href="/all.css" media="all" />
</head>
<body>
    <header>
        <a href="/">
            <strong>
                SwiftRex
            </strong>
            <span>Documentation</span>
        </a>
        <sup>Beta</sup>
    </header>

    <!--
    <form class="search">
        <input type="search" placeholder="Search" />
    </form>
    -->

    <nav>
        <div class="wrapper">
            <h2>On This Page</h2>
            <ol><li><a href="#relationships">Relationships</a><ul><li><a href="#relationships">Conforms To</a></li></ul></li><li><a href="#nested type aliases">Nested Type Aliases</a><ul><li class="typealias"><a href="#liftmiddleware.inputactiontype">Input​Action​Type</a></li><li class="typealias"><a href="#liftmiddleware.outputactiontype">Output​Action​Type</a></li><li class="typealias"><a href="#liftmiddleware.statetype">State​Type</a></li><li class="typealias"><a href="#liftmiddleware.localinputactiontype">Local​Input​Action​Type</a></li><li class="typealias"><a href="#liftmiddleware.localoutputactiontype">Local​Output​Action​Type</a></li><li class="typealias"><a href="#liftmiddleware.localstatetype">Local​State​Type</a></li></ul></li><li><a href="#initializers">Initializers</a><ul><li class="initializer"><a href="#liftmiddleware.init(middleware:inputactionmap:outputactionmap:statemap:)">init(middleware:​input​Action​Map:​output​Action​Map:​state​Map:​)</a></li></ul></li><li><a href="#properties">Properties</a><ul><li class="property"><a href="#liftmiddleware.partmiddleware">part​Middleware</a></li><li class="property"><a href="#liftmiddleware.inputactionmap">input​Action​Map</a></li><li class="property"><a href="#liftmiddleware.outputactionmap">output​Action​Map</a></li><li class="property"><a href="#liftmiddleware.statemap">state​Map</a></li></ul></li><li><a href="#methods">Methods</a><ul><li class="method"><a href="#liftmiddleware.receivecontext(getstate:output:)">receive​Context(get​State:​output:​)</a></li><li class="method"><a href="#liftmiddleware.handle(action:from:afterreducer:)">handle(action:​from:​after​Reducer:​)</a></li></ul></li></ol>
        </div>
    </nav>

    <main>
        <article>
            <h1>
    <small>Structure</small>
    <code class="name">Lift​Middleware</code>
</h1>

<html><body><pre class="highlight"><code><span class="keyword">public</span> <span class="keyword">struct</span> <span class="type">LiftMiddleware</span>&lt;<span class="variable">GlobalInputActionType</span>, <span class="variable">GlobalOutputActionType</span>, <span class="variable">GlobalStateType</span>, <span class="variable">PartMiddleware</span>: <a href="/Middleware"><span class="type">Middleware</span></a>&gt;: <a href="/Middleware"><span class="type">Middleware</span></a></code></pre></body></html>
<div class="summary" role="doc-abstract">
    <p>This is a container that lifts a sub-state middleware to a global state middleware.</p>

</div>
<div class="discussion">
    <p>Internally you find the middleware responsible for handling events and actions for a sub-state (<code>Part</code>), while this outer class will be able to compose with global state (<code>Whole</code>) in your <code>Store</code>.</p>

<p>You should not be able to instantiate this class directly, instead, create a middleware for the sub-state and call <code>Middleware.lift(_:)</code>, passing as parameter the keyPath from whole to part.</p>

</div>
<section id="relationships">
    <h2 hidden>Relationships</h2>
        <figure>
    <?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN"
 "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<!-- Generated by graphviz version 2.44.0 (20200408.0750)
 -->
<!-- Pages: 1 -->
<svg width="872pt" height="116pt"
 viewBox="0.00 0.00 872.00 116.00" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
<g id="graph0" class="graph" transform="scale(1 1) rotate(0) translate(4 112)">
<polygon fill="white" stroke="transparent" points="-4,4 -4,-112 868,-112 868,4 -4,4"/>
<!-- LiftMiddleware -->
<g id="node1" class="node structure current">
<title>LiftMiddleware</title>
<g id="a_node1"><a xlink:href="/LiftMiddleware" xlink:title="LiftMiddleware">
<path fill="none" stroke="black" stroke-width="3" d="M528,-108C528,-108 336,-108 336,-108 330,-108 324,-102 324,-96 324,-96 324,-84 324,-84 324,-78 330,-72 336,-72 336,-72 528,-72 528,-72 534,-72 540,-78 540,-84 540,-84 540,-96 540,-96 540,-102 534,-108 528,-108"/>
<text text-anchor="middle" x="432" y="-86.3" font-family="Menlo" font-size="14.00">LiftMiddleware</text>
</a>
</g>
</g>
<!-- Middleware -->
<g id="node2" class="node protocol">
<title>Middleware</title>
<path fill="none" stroke="black" d="M528,-36C528,-36 336,-36 336,-36 330,-36 324,-30 324,-24 324,-24 324,-12 324,-12 324,-6 330,0 336,0 336,0 528,0 528,0 534,0 540,-6 540,-12 540,-12 540,-24 540,-24 540,-30 534,-36 528,-36"/>
<text text-anchor="middle" x="432" y="-14.3" font-family="Menlo" font-size="14.00">Middleware</text>
</g>
<!-- LiftMiddleware&#45;&gt;Middleware -->
<g id="edge1" class="edge conformsTo">
<title>LiftMiddleware&#45;&gt;Middleware</title>
<path fill="none" stroke="black" d="M432,-71.7C432,-63.98 432,-54.71 432,-46.11"/>
<polygon fill="black" stroke="black" points="435.5,-46.1 432,-36.1 428.5,-46.1 435.5,-46.1"/>
</g>
</g>
</svg>


    <figcaption hidden>Inheritance graph for LiftMiddleware.</figcaption>
</figure>
        <h3>Conforms To</h3>
<dl>
    <dt class="protocol"><code><a href="/Middleware">Middleware</a></code></dt>
<dd><p>⛓ <code>Middleware</code> is a plugin, or a composition of several plugins, that are assigned to the <code>ReduxStoreProtocol</code> pipeline in order to handle each
action received (<code>InputActionType</code>), to execute side-effects in response, and eventually dispatch more actions (<code>OutputActionType</code>) in the process.
This happens before the <code>Reducer</code> to do its job.</p>
</dd>
</dl>
</section>
    <section id="nested type aliases">
        <h2>Nested Type Aliases</h2>

        <div role="article" class="typealias" id="liftmiddleware.inputactiontype">
    <h3>
        <code>Input​Action​Type</code>
    </h3>
    <html><body><pre class="highlight"><code><span class="keyword">public</span> <span class="keyword">typealias</span> <span class="variable">InputActionType</span> = <span class="type">GlobalInputActionType</span></code></pre></body></html>
</div>
<div role="article" class="typealias" id="liftmiddleware.outputactiontype">
    <h3>
        <code>Output​Action​Type</code>
    </h3>
    <html><body><pre class="highlight"><code><span class="keyword">public</span> <span class="keyword">typealias</span> <span class="variable">OutputActionType</span> = <span class="type">GlobalOutputActionType</span></code></pre></body></html>
</div>
<div role="article" class="typealias" id="liftmiddleware.statetype">
    <h3>
        <code>State​Type</code>
    </h3>
    <html><body><pre class="highlight"><code><span class="keyword">public</span> <span class="keyword">typealias</span> <span class="variable">StateType</span> = <span class="type">GlobalStateType</span></code></pre></body></html>
</div>
<div role="article" class="typealias" id="liftmiddleware.localinputactiontype">
    <h3>
        <code>Local​Input​Action​Type</code>
    </h3>
    <html><body><pre class="highlight"><code><span class="keyword">typealias</span> <span class="variable">LocalInputActionType</span> = <span class="type">PartMiddleware</span>.<span class="type">InputActionType</span></code></pre></body></html>
</div>
<div role="article" class="typealias" id="liftmiddleware.localoutputactiontype">
    <h3>
        <code>Local​Output​Action​Type</code>
    </h3>
    <html><body><pre class="highlight"><code><span class="keyword">typealias</span> <span class="variable">LocalOutputActionType</span> = <span class="type">PartMiddleware</span>.<span class="type">OutputActionType</span></code></pre></body></html>
</div>
<div role="article" class="typealias" id="liftmiddleware.localstatetype">
    <h3>
        <code>Local​State​Type</code>
    </h3>
    <html><body><pre class="highlight"><code><span class="keyword">typealias</span> <span class="variable">LocalStateType</span> = <span class="type">PartMiddleware</span>.<span class="type">StateType</span></code></pre></body></html>
</div>
    </section>
    <section id="initializers">
        <h2>Initializers</h2>

        <div role="article" class="initializer" id="liftmiddleware.init(middleware:inputactionmap:outputactionmap:statemap:)">
    <h3>
        <code>init(middleware:​input​Action​Map:​output​Action​Map:​state​Map:​)</code>
    </h3>
    <html><body><pre class="highlight"><code><span class="keyword">public</span> <span class="keyword">init</span>(<span class="variable">middleware</span>: <span class="type">PartMiddleware</span>, <span class="variable">inputActionMap</span>: <span class="attribute">@</span><span class="attribute">escaping</span> (<span class="type">GlobalInputActionType</span>) -&gt; <span class="type">PartMiddleware</span>.<span class="type">InputActionType</span>?, <span class="variable">outputActionMap</span>: <span class="attribute">@</span><span class="attribute">escaping</span> (<span class="type">PartMiddleware</span>.<span class="type">OutputActionType</span>) -&gt; <span class="type">GlobalOutputActionType</span>, <span class="variable">stateMap</span>: <span class="attribute">@</span><span class="attribute">escaping</span> (<span class="type">GlobalStateType</span>) -&gt; <span class="type">PartMiddleware</span>.<span class="type">StateType</span>)</code></pre></body></html>
</div>
    </section>
    <section id="properties">
        <h2>Properties</h2>

        <div role="article" class="variable" id="liftmiddleware.partmiddleware">
    <h3>
        <code>part​Middleware</code>
    </h3>
    <html><body><pre class="highlight"><code><span class="keyword">let</span> <span class="variable">partMiddleware</span>: <span class="type">PartMiddleware</span></code></pre></body></html>
</div>
<div role="article" class="variable" id="liftmiddleware.inputactionmap">
    <h3>
        <code>input​Action​Map</code>
    </h3>
    <html><body><pre class="highlight"><code><span class="keyword">let</span> <span class="variable">inputActionMap</span>: (<span class="type">GlobalInputActionType</span>) -&gt; <span class="type">LocalInputActionType</span>?</code></pre></body></html>
</div>
<div role="article" class="variable" id="liftmiddleware.outputactionmap">
    <h3>
        <code>output​Action​Map</code>
    </h3>
    <html><body><pre class="highlight"><code><span class="keyword">let</span> <span class="variable">outputActionMap</span>: (<span class="type">LocalOutputActionType</span>) -&gt; <span class="type">GlobalOutputActionType</span></code></pre></body></html>
</div>
<div role="article" class="variable" id="liftmiddleware.statemap">
    <h3>
        <code>state​Map</code>
    </h3>
    <html><body><pre class="highlight"><code><span class="keyword">let</span> <span class="variable">stateMap</span>: (<span class="type">GlobalStateType</span>) -&gt; <span class="type">LocalStateType</span></code></pre></body></html>
</div>
    </section>
    <section id="methods">
        <h2>Methods</h2>

        <div role="article" class="function" id="liftmiddleware.receivecontext(getstate:output:)">
    <h3>
        <code>receive​Context(get​State:​output:​)</code>
    </h3>
    <html><body><pre class="highlight"><code><span class="keyword">public</span> <span class="keyword">func</span> <span class="function">receiveContext</span>(<span class="variable">getState</span>: <span class="attribute">@</span><span class="attribute">escaping</span> () -&gt; <span class="type">GlobalStateType</span>, <span class="variable">output</span>: <a href="/AnyActionHandler"><span class="type">AnyActionHandler</span></a>&lt;<span class="type">GlobalOutputActionType</span>&gt;)</code></pre></body></html>
</div>
<div role="article" class="function" id="liftmiddleware.handle(action:from:afterreducer:)">
    <h3>
        <code>handle(action:​from:​after​Reducer:​)</code>
    </h3>
    <html><body><pre class="highlight"><code><span class="keyword">public</span> <span class="keyword">func</span> <span class="function">handle</span>(<span class="variable">action</span>: <span class="type">GlobalInputActionType</span>, <span class="variable">from</span> <span class="variable">dispatcher</span>: <a href="/ActionSource"><span class="type">ActionSource</span></a>, <span class="variable">afterReducer</span>: <span class="keyword">inout</span> <a href="/AfterReducer"><span class="type">AfterReducer</span></a>)</code></pre></body></html>
<div class="summary" role="doc-abstract">
    <p>Handles the incoming actions and may or not start async tasks, check the latest state at any point or dispatch
additional actions. This is also a good place for analytics, tracking, logging and telemetry. Because the lift
middleware is derived from a sub-state/sub-action middleware, every global action received will be mapped into
a sub-action, in a operation that can return nil (<code>Optional&lt;SubAction&gt;</code>). In case it's nil, it means that the
sub-action middleware doesn't work with this type of action, so the lifted middleware will simply call the next
middleware in the chain. On the other hand, if this operation returns a non-nil local action, this local action will
be handled by the child middleware, which is also responsible for calling <code>next()</code> in this case. When the <code>State</code>
type is also lifted, the context property will translate the global state into local state as expected every time
you call <code>context().getState()</code>.</p>

</div>
<h4>Parameters</h4>

<table class="parameters">
  <thead hidden>
  <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
  </tr>
  </thead>
  <tbody>
    <tr>
    <th>action</th>
    <td><code class="type">Global​Input​Action​Type</code></td></td>
    <td><ul>
<li>action: the action to be handled</li>
</ul>
</td>
</tr>
<tr>
    <th>next</th>
    <td></td></td>
    <td><ul>
<li>next: opportunity to call the next middleware in the chain and, eventually, the reducer pipeline. Call it only once, not more or less than once. Call it from the same thread and runloop where the handle function is executed, never from a completion handler or dispatch queue block. In case you don't need to compare state before and after it's changed from the reducers, please consider to add a <code>defer</code> block with <code>next()</code> on it, at the beginning of <code>handle</code> function.</li>
</ul>
</td>
</tr>
  </tbody>
</table>
</div>
    </section>



        </article>
    </main>

    <footer>
        <p>
    Generated on <time datetime="2020-05-29T03:19:03+0200">29. May 2020</time> using <a href="https://github.com/SwiftDocOrg/swift-doc">swift-doc</a> <span class="version">1.0.0-beta.3</span>.
</p>
    </footer>
</body>
</html>
