<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SwiftRex - Reducer</title>
    <link rel="stylesheet" type="text/css" href="/all.css" media="all" />
</head>
<body>
    <header>
        <a href="/">
            <strong>
                SwiftRex
            </strong>
            <span>Documentation</span>
        </a>
        <sup>Beta</sup>
    </header>

    <!--
    <form class="search">
        <input type="search" placeholder="Search" />
    </form>
    -->

    <nav>
        <div class="wrapper">
            <h2>On This Page</h2>
            <ol><li><a href="#relationships">Relationships</a><ul><li><a href="#relationships">Conforms To</a></li></ul></li><li><a href="#initializers">Initializers</a><ul><li class="initializer"><a href="#reducer.init(_:)">init(_:​)</a></li></ul></li><li><a href="#properties">Properties</a><ul><li class="property"><a href="#reducer.reduce">reduce</a></li><li class="property"><a href="#reducer.identity">identity</a></li></ul></li><li><a href="#methods">Methods</a><ul><li class="method"><a href="#reducer.&lt;&gt;(lhs:rhs:)">&lt;&gt;(lhs:​rhs:​)</a></li><li class="method"><a href="#reducer.lift(actiongetter:stategetter:statesetter:)">lift(action​Getter:​state​Getter:​state​Setter:​)</a></li><li class="method"><a href="#reducer.lift(action:state:)">lift(action:​state:​)</a></li><li class="method"><a href="#reducer.lift(state:)">lift(state:​)</a></li><li class="method"><a href="#reducer.lift(action:)">lift(action:​)</a></li></ul></li></ol>
        </div>
    </nav>

    <main>
        <article>
            <h1>
    <small>Structure</small>
    <code class="name">Reducer</code>
</h1>

<html><body><pre class="highlight"><code><span class="keyword">public</span> <span class="keyword">struct</span> <span class="type">Reducer</span>&lt;<span class="variable">ActionType</span>, <span class="variable">StateType</span>&gt;</code></pre></body></html>
<div class="summary" role="doc-abstract">
    <p>⚙ <code>Reducer</code> is a pure function wrapped in a monoid container, that takes an action and the current state to calculate
the new state.</p>

</div>
<div class="discussion">
    <p>The <code>Middleware</code> pipeline will be notified about actions, or even trigger new ones, but what they can NOT do is
changing the app state. Middlewares have read-only access to the up-to-date state of our apps, but when mutations are
required we must use the <code>Reducer</code> function:</p>

<html><body><pre class="highlight"><code>(<span class="variable">ActionType</span>, <span class="variable">StateType</span>) -&gt; <span class="variable">StateType</span>
</code></pre></body></html>
<p>Given an action and the current state, returns the calculated state. This function will be executed in the last stage
of an action handling, when all middlewares had the chance to read the action and start their own side-effects.</p>

<p>It's important to understand that reducer is a synchronous operations that calculates a new state without any kind of
side-effect, so never add properties to the <code>Reducer</code> structs or call any external function. If you are tempted to do
that, please create a middleware. Reducers are also responsible for keeping the consistency of a state, so it's always
good to do a final sanity check before changing the state, like for example check other dependant properties that must
be changed together.</p>

<p>Once the reducer function executes, the store will update its single source of truth with the new calculated state,
and propagate it to all its observers, that will react to the new state and update Views, for example.</p>

<p>This function is wrapped in a struct to overcome some Swift limitations, for example, allowing us to compose multiple
reducers into one (monoid operation, where two or more reducers become a single one) or lifting reducers from local
types to global types. The ability to lift reducers allow us to create small reducers, specialized in parts of our
state only, written in different frameworks and modules, and later plugged into a bigger state and action handler by
providing a way to map state and actions between the global and local ones. For more information about that, please
check the functions <code>lift(actionGetter:stateGetter:stateSetter:)</code> and <code>lift(action:state:)</code>.</p>

<p>A possible implementation of a reducer would be:</p>

<html><body><pre class="highlight"><code><span class="keyword">let</span> <span class="variable">volumeReducer</span> = <span class="variable">Reducer</span>&lt;<span class="variable">VolumeAction</span>, <span class="variable">VolumeState</span>&gt; = { <span class="variable">action</span>, <span class="variable">currentState</span> <span class="keyword">in</span>
    <span class="keyword">switch</span> <span class="variable">action</span> {
    <span class="keyword">case</span> .<span class="variable">louder</span>:
        <span class="keyword">return</span> <span class="variable">VolumeState</span>(
            <span class="variable">isMute</span>: <span class="type">currentState</span>.<span class="type">isMute</span>,
            <span class="variable">volume</span>: <span class="type">min</span>(<span class="number literal">100</span>, <span class="variable">currentState</span>.<span class="type">volume</span> + <span class="number literal">5</span>)
        )
    <span class="keyword">case</span> .<span class="variable">quieter</span>:
        <span class="keyword">return</span> <span class="variable">VolumeState</span>(
            <span class="variable">isMute</span>: <span class="type">currentState</span>.<span class="type">isMute</span>,
            <span class="variable">volume</span>: <span class="type">max</span>(<span class="number literal">0</span>, <span class="variable">currentState</span>.<span class="type">volume</span> - <span class="number literal">5</span>)
        )
    <span class="keyword">case</span> .<span class="variable">toggleMute</span>:
        <span class="keyword">return</span> <span class="variable">VolumeState</span>(
            <span class="variable">isMute</span>: !<span class="variable">currentState</span>.<span class="type">isMute</span>,
            <span class="variable">volume</span>: <span class="type">currentState</span>.<span class="type">volume</span>
        )
    }
}
</code></pre></body></html>
<p>Please notice from the example above the following good practices:</p>

<html><body><pre class="highlight"><code>                  &amp;boxdr;&amp;boxh;&amp;boxh;&amp;boxh;&amp;boxh;&amp;boxh;&amp;boxdl;                                                                                        &amp;boxdr;&amp;boxh;&amp;boxh;&amp;boxh;&amp;boxh;&amp;boxh;&amp;boxdl;
                  &amp;boxv;     &amp;boxv;     <span class="variable">handle</span>   &amp;boxdr;&amp;boxh;&amp;boxh;&amp;boxh;&amp;boxh;&amp;boxh;&amp;boxh;&amp;boxh;&amp;boxh;&amp;boxh;&amp;boxh;&amp;boxdl; <span class="variable">request</span>      &amp;boxdr; &amp;boxh; &amp;boxh; &amp;boxh; &amp;boxh;  <span class="variable">response</span>     &amp;boxdr;&amp;boxh;&amp;boxh;&amp;boxh;&amp;boxh;&amp;boxh;&amp;boxh;&amp;boxh;&amp;boxh;&amp;boxh;&amp;boxh;&amp;boxdl; <span class="variable">dispatch</span>   &amp;boxv;     &amp;boxv;
                  &amp;boxv;     &amp;boxv;   &amp;boxdr;&amp;boxh;&amp;boxh;&amp;boxh;&amp;boxh;&amp;boxh;&amp;boxh;&amp;boxh;&amp;boxh;&amp;boxh;▶&amp;boxv;<span class="variable">Middleware</span>&amp;boxvr;&amp;boxh;&amp;boxh;&amp;boxh;&amp;boxh;&amp;boxh;&amp;boxh;&amp;boxh;&amp;boxh;&amp;boxh;&amp;boxh;&amp;boxh;&amp;boxh;&amp;boxh;▶ <span class="variable">External</span>&amp;boxv;&amp;boxh;&amp;boxh;&amp;boxh;&amp;boxh;&amp;boxh;&amp;boxh;&amp;boxh;&amp;boxh;&amp;boxh;&amp;boxh;&amp;boxh;&amp;boxh;&amp;boxh;▶&amp;boxv;<span class="variable">Middleware</span>&amp;boxv;&amp;boxh;&amp;boxh;&amp;boxh;&amp;boxh;&amp;boxh;&amp;boxh;&amp;boxh;&amp;boxh;&amp;boxh;&amp;boxh;&amp;boxh;▶&amp;boxv;<span class="variable">Store</span>&amp;boxv;&amp;boxh; &amp;boxh; ▶ ...
                  &amp;boxv;     &amp;boxv;   &amp;boxv; <span class="variable">Action</span>   &amp;boxv; <span class="variable">Pipeline</span> &amp;boxv; <span class="variable">side</span>-<span class="variable">effects</span> &amp;boxv; <span class="variable">World</span>    <span class="variable">side</span>-<span class="variable">effects</span> &amp;boxv; <span class="variable">callback</span> &amp;boxv; <span class="variable">New</span> <span class="variable">Action</span> &amp;boxv;     &amp;boxv;
                  &amp;boxv;     &amp;boxv;   &amp;boxv;          &amp;boxur;&amp;boxh;&amp;boxh;&amp;boxh;&amp;boxh;&amp;boxh;&amp;boxh;&amp;boxh;&amp;boxh;&amp;boxh;&amp;boxh;&amp;boxul;               &amp;boxh; &amp;boxh; &amp;boxh; &amp;boxh; &amp;boxul;              &amp;boxur;&amp;boxh;&amp;boxh;&amp;boxh;&amp;boxh;&amp;boxh;&amp;boxh;&amp;boxh;&amp;boxh;&amp;boxh;&amp;boxh;&amp;boxul;            &amp;boxur;&amp;boxh;&amp;boxh;&amp;boxh;&amp;boxh;&amp;boxh;&amp;boxul;
&amp;boxdr;&amp;boxh;&amp;boxh;&amp;boxh;&amp;boxh;&amp;boxh;&amp;boxh;&amp;boxdl; <span class="variable">dispatch</span> &amp;boxv;     &amp;boxv;   &amp;boxv;
&amp;boxv;<span class="variable">Button</span>&amp;boxv;&amp;boxh;&amp;boxh;&amp;boxh;&amp;boxh;&amp;boxh;&amp;boxh;&amp;boxh;&amp;boxh;&amp;boxh;▶&amp;boxv;<span class="variable">Store</span>&amp;boxv;&amp;boxh;&amp;boxh;▶&amp;boxv;                                                         &amp;boxdr;&amp;boxh;&amp;boxh;&amp;boxh;&amp;boxh;&amp;boxh;&amp;boxh;&amp;boxh;&amp;boxh;&amp;boxdl;
&amp;boxur;&amp;boxh;&amp;boxh;&amp;boxh;&amp;boxh;&amp;boxh;&amp;boxh;&amp;boxul; <span class="variable">Action</span>   &amp;boxv;     &amp;boxv;   &amp;boxv;                                                      &amp;boxdr;&amp;boxh;▶&amp;boxv; <span class="variable">View</span> <span class="number literal">1</span> &amp;boxv;
                  &amp;boxv;     &amp;boxv;   &amp;boxv;                                  &amp;boxdr;&amp;boxh;&amp;boxh;&amp;boxh;&amp;boxh;&amp;boxh;&amp;boxdl;             &amp;boxv;  &amp;boxur;&amp;boxh;&amp;boxh;&amp;boxh;&amp;boxh;&amp;boxh;&amp;boxh;&amp;boxh;&amp;boxh;&amp;boxul;
                  &amp;boxv;     &amp;boxv;   &amp;boxv; <span class="variable">reduce</span>   &amp;boxdr;&amp;boxh;&amp;boxh;&amp;boxh;&amp;boxh;&amp;boxh;&amp;boxh;&amp;boxh;&amp;boxh;&amp;boxh;&amp;boxh;&amp;boxdl;            &amp;boxv;     &amp;boxv; <span class="variable">onNext</span>      &amp;boxv;  &amp;boxdr;&amp;boxh;&amp;boxh;&amp;boxh;&amp;boxh;&amp;boxh;&amp;boxh;&amp;boxh;&amp;boxh;&amp;boxdl;
                  &amp;boxv;     &amp;boxv;   &amp;boxur;&amp;boxh;&amp;boxh;&amp;boxh;&amp;boxh;&amp;boxh;&amp;boxh;&amp;boxh;&amp;boxh;&amp;boxh;▶&amp;boxv; <span class="variable">Reducer</span>  &amp;boxvr;&amp;boxh;&amp;boxh;&amp;boxh;&amp;boxh;&amp;boxh;&amp;boxh;&amp;boxh;&amp;boxh;&amp;boxh;&amp;boxh;&amp;boxh;▶&amp;boxv;<span class="variable">Store</span>&amp;boxv;&amp;boxh;&amp;boxh;&amp;boxh;&amp;boxh;&amp;boxh;&amp;boxh;&amp;boxh;&amp;boxh;&amp;boxh;&amp;boxh;&amp;boxh;&amp;boxh;▶&amp;boxvr;&amp;boxh;▶&amp;boxv; <span class="variable">View</span> <span class="number literal">2</span> &amp;boxv;
                  &amp;boxv;     &amp;boxv;     <span class="variable">Action</span>   &amp;boxv; <span class="variable">Pipeline</span> &amp;boxv; <span class="variable">New</span> <span class="variable">state</span>  &amp;boxv;     &amp;boxv; <span class="variable">New</span> <span class="variable">state</span>   &amp;boxv;  &amp;boxur;&amp;boxh;&amp;boxh;&amp;boxh;&amp;boxh;&amp;boxh;&amp;boxh;&amp;boxh;&amp;boxh;&amp;boxul;
                  &amp;boxur;&amp;boxh;&amp;boxh;&amp;boxh;&amp;boxh;&amp;boxh;&amp;boxul;     +        &amp;boxur;&amp;boxh;&amp;boxh;&amp;boxh;&amp;boxh;&amp;boxh;&amp;boxh;&amp;boxh;&amp;boxh;&amp;boxh;&amp;boxh;&amp;boxul;            &amp;boxur;&amp;boxh;&amp;boxh;&amp;boxh;&amp;boxh;&amp;boxh;&amp;boxul;             &amp;boxv;  &amp;boxdr;&amp;boxh;&amp;boxh;&amp;boxh;&amp;boxh;&amp;boxh;&amp;boxh;&amp;boxh;&amp;boxh;&amp;boxdl;
                              <span class="variable">State</span>                                                &amp;boxur;&amp;boxh;▶&amp;boxv; <span class="variable">View</span> <span class="number literal">3</span> &amp;boxv;
                                                                                      &amp;boxur;&amp;boxh;&amp;boxh;&amp;boxh;&amp;boxh;&amp;boxh;&amp;boxh;&amp;boxh;&amp;boxh;&amp;boxul;
</code></pre></body></html>
</div>
<section id="relationships">
    <h2 hidden>Relationships</h2>
        <figure>
    <?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN"
 "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<!-- Generated by graphviz version 2.44.0 (20200408.0750)
 -->
<!-- Pages: 1 -->
<svg width="872pt" height="116pt"
 viewBox="0.00 0.00 872.00 116.00" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
<g id="graph0" class="graph" transform="scale(1 1) rotate(0) translate(4 112)">
<polygon fill="white" stroke="transparent" points="-4,4 -4,-112 868,-112 868,4 -4,4"/>
<!-- Reducer -->
<g id="node1" class="node structure current">
<title>Reducer</title>
<g id="a_node1"><a xlink:href="/Reducer" xlink:title="Reducer">
<path fill="none" stroke="black" stroke-width="3" d="M528,-108C528,-108 336,-108 336,-108 330,-108 324,-102 324,-96 324,-96 324,-84 324,-84 324,-78 330,-72 336,-72 336,-72 528,-72 528,-72 534,-72 540,-78 540,-84 540,-84 540,-96 540,-96 540,-102 534,-108 528,-108"/>
<text text-anchor="middle" x="432" y="-86.3" font-family="Menlo" font-size="14.00">Reducer</text>
</a>
</g>
</g>
<!-- Monoid -->
<g id="node2" class="node protocol">
<title>Monoid</title>
<path fill="none" stroke="black" d="M528,-36C528,-36 336,-36 336,-36 330,-36 324,-30 324,-24 324,-24 324,-12 324,-12 324,-6 330,0 336,0 336,0 528,0 528,0 534,0 540,-6 540,-12 540,-12 540,-24 540,-24 540,-30 534,-36 528,-36"/>
<text text-anchor="middle" x="432" y="-14.3" font-family="Menlo" font-size="14.00">Monoid</text>
</g>
<!-- Reducer&#45;&gt;Monoid -->
<g id="edge1" class="edge conformsTo">
<title>Reducer&#45;&gt;Monoid</title>
<path fill="none" stroke="black" d="M432,-71.7C432,-63.98 432,-54.71 432,-46.11"/>
<polygon fill="black" stroke="black" points="435.5,-46.1 432,-36.1 428.5,-46.1 435.5,-46.1"/>
</g>
</g>
</svg>


    <figcaption hidden>Inheritance graph for Reducer.</figcaption>
</figure>
        <h3>Conforms To</h3>
<dl>
    <dt class="protocol"><code><a href="/Monoid">Monoid</a></code></dt>
<dd><p>Protocol for a monoid algebra, allowing monoidal composition. It's a <code>Semigroup</code> with identity element, element which,
when combined to any other element, will keep the other elemenet unchanged, regardless if the composition happened from
the left or from the right, for example: <code>a &lt;&gt; identity = identity &lt;&gt; a = a</code>, for any <code>a</code> in <code>A</code>.</p>
</dd>
</dl>
</section>
    <section id="initializers">
        <h2>Initializers</h2>

        <div role="article" class="initializer" id="reducer.init(_:)">
    <h3>
        <code>init(_:​)</code>
    </h3>
    <html><body><pre class="highlight"><code><span class="keyword">public</span> <span class="keyword">init</span>(<span class="keyword">_</span> <span class="variable">reduce</span>: <span class="attribute">@</span><span class="attribute">escaping</span> <a href="/ReduceFunction"><span class="type">ReduceFunction</span></a>&lt;<span class="type">ActionType</span>, <span class="type">StateType</span>&gt;)</code></pre></body></html>
<div class="summary" role="doc-abstract">
    <p>Reducer initializer takes only the underlying function <code>(ActionType, StateType) -&gt; StateType</code> that is the reducer
function itself.</p>

</div>
<h4>Parameters</h4>

<table class="parameters">
  <thead hidden>
  <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
  </tr>
  </thead>
  <tbody>
    <tr>
    <th>reduce</th>
    <td><code class="type">@escaping Reduce​Function&lt;Action​Type, State​Type&gt;</code></td></td>
    <td><ul>
<li>reduce: a pure function that is gonna be wrapped in a monoid container, and that calculates the new state from an action and the old state.</li>
</ul>
</td>
</tr>
  </tbody>
</table>
</div>
    </section>
    <section id="properties">
        <h2>Properties</h2>

        <div role="article" class="variable" id="reducer.reduce">
    <h3>
        <code>reduce</code>
    </h3>
    <html><body><pre class="highlight"><code><span class="keyword">let</span> <span class="variable">reduce</span>: <a href="/ReduceFunction"><span class="type">ReduceFunction</span></a>&lt;<span class="type">ActionType</span>, <span class="type">StateType</span>&gt;</code></pre></body></html>
<div class="summary" role="doc-abstract">
    <p>Execute the wrapped reduce function. You must provide the parameters <code>action: ActionType</code> (the action to be
evaluated during the reducing process) and the latest <code>state: StateType</code> (the current state in your single
source-of-truth). The result of this call will be a <code>StateType</code> with the calculated new state.</p>

</div>
</div>
<div role="article" class="variable" id="reducer.identity">
    <h3>
        <code>identity</code>
    </h3>
    <html><body><pre class="highlight"><code><span class="keyword">var</span> <span class="variable">identity</span>: <a href="/Reducer"><span class="type">Reducer</span></a>&lt;<span class="type">ActionType</span>, <span class="type">StateType</span>&gt;</code></pre></body></html>
<div class="summary" role="doc-abstract">
    <p>Neutral monoidal container. Composing any monoid with an <code>identity</code> monoid should result in a function unchanged,
regardless if the identity element is on the left-hand side or the right-hand side or this composition.</p>

</div>
<div class="discussion">
    <p>Therefore:</p>

<html><body><pre class="highlight"><code>   <span class="variable">Reducer</span>&lt;<span class="variable">ActionType</span>, <span class="variable">StateType</span>&gt; &lt;&gt; .<span class="variable">identity</span>
== .<span class="variable">identity</span> &lt;&gt; <span class="variable">Reducer</span>&lt;<span class="variable">ActionType</span>, <span class="variable">StateType</span>&gt;
== <span class="variable">Reducer</span>&lt;<span class="variable">ActionType</span>, <span class="variable">StateType</span>&gt;
</code></pre></body></html>
<p>The implementation of this reducer, as one should expect, simply ignores the action and returns the state unchanged</p>

</div>
</div>
    </section>
    <section id="methods">
        <h2>Methods</h2>

        <div role="article" class="function" id="reducer.<>(lhs:rhs:)">
    <h3>
        <code>&lt;&gt;(lhs:​rhs:​)</code>
    </h3>
    <html><body><pre class="highlight"><code><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">func</span> &lt;&gt;(<span class="variable">lhs</span>: <a href="/Reducer"><span class="type">Reducer</span></a>&lt;<span class="type">ActionType</span>, <span class="type">StateType</span>&gt;, <span class="variable">rhs</span>: <a href="/Reducer"><span class="type">Reducer</span></a>&lt;<span class="type">ActionType</span>, <span class="type">StateType</span>&gt;) -&gt; <a href="/Reducer"><span class="type">Reducer</span></a>&lt;<span class="type">ActionType</span>, <span class="type">StateType</span>&gt;</code></pre></body></html>
<div class="summary" role="doc-abstract">
    <p>Monoid Append operation. Allows to compose two reducers into one, keeping in mind that the order of the composition
DOES matter. When composing reducer A with reducer B, when an action X arrives, first it will be forwarded to
reducer A together with the initial state. This reducer may return a slightly (or completely) changed state from
that operation, and this state will then be forwarded to reducer B together with the same action X. If you change
the order, results may vary as you can imagine. Monoids don't necessarily hold the commutative axiom, although
sometimes they do. What they necessarily hold is the associativity axiom, which means that if you compose A and B,
and later C, it's exactly the same as if you compose A to a previously composed B and C:
<code>(A &lt;&gt; B) &lt;&gt; C == A &lt;&gt; (B &lt;&gt; C)</code>. So please don't worry about surrounding your reducers with parenthesis:</p>

</div>
<div class="discussion">
    <html><body><pre class="highlight"><code><span class="keyword">let</span> <span class="variable">globalReducer</span> = <span class="variable">firstReducer</span> &lt;&gt; <span class="variable">secondReducer</span> &lt;&gt; <span class="variable">thirdReducer</span> &lt;&gt; <span class="variable">andSoOn</span>
</code></pre></body></html>
</div>
<h4>Parameters</h4>

<table class="parameters">
  <thead hidden>
  <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
  </tr>
  </thead>
  <tbody>
    <tr>
    <th>lhs</th>
    <td><code class="type">Reducer&lt;Action​Type, State​Type&gt;</code></td></td>
    <td><ul>
<li>lhs: First monoid <code>(ActionType, StateType) -&gt; StateType</code>, let's call it <code>f(x)</code></li>
</ul>
</td>
</tr>
<tr>
    <th>rhs</th>
    <td><code class="type">Reducer&lt;Action​Type, State​Type&gt;</code></td></td>
    <td><ul>
<li>rhs: Second monoid <code>(ActionType, StateType) -&gt; StateType</code>, let's call it <code>g(x)</code></li>
</ul>
</td>
</tr>
  </tbody>
</table>
  <h4>Returns</h4>
  <p>a composed monoid <code>(ActionType, StateType) -&gt; StateType</code> equivalent to <code>g(f(x))</code></p>

</div>
<div role="article" class="function" id="reducer.lift(actiongetter:stategetter:statesetter:)">
    <h3>
        <code>lift(action​Getter:​state​Getter:​state​Setter:​)</code>
    </h3>
    <html><body><pre class="highlight"><code><span class="keyword">public</span> <span class="keyword">func</span> <span class="function">lift</span>&lt;<span class="variable">GlobalActionType</span>, <span class="variable">GlobalStateType</span>&gt;(<span class="variable">actionGetter</span>: <span class="attribute">@</span><span class="attribute">escaping</span> (<span class="type">GlobalActionType</span>) -&gt; <span class="type">ActionType</span>?, <span class="variable">stateGetter</span>: <span class="attribute">@</span><span class="attribute">escaping</span> (<span class="type">GlobalStateType</span>) -&gt; <span class="type">StateType</span>, <span class="variable">stateSetter</span>: <span class="attribute">@</span><span class="attribute">escaping</span> (<span class="keyword">inout</span> <span class="type">GlobalStateType</span>, <span class="type">StateType</span>) -&gt; <span class="type">Void</span>) -&gt; <a href="/Reducer"><span class="type">Reducer</span></a>&lt;<span class="type">GlobalActionType</span>, <span class="type">GlobalStateType</span>&gt;</code></pre></body></html>
<div class="summary" role="doc-abstract">
    <p>A type-lifting method. The global state of your app is <em>Whole</em>, and the <code>Reducer</code> handles <em>Part</em>, that is a
sub-state.</p>

</div>
<div class="discussion">
    <p>Let's suppose you may want to have a <code>gpsReducer</code> that knows about the following <code>struct</code>:</p>

<html><body><pre class="highlight"><code><span class="keyword">struct</span> <span class="type">Location</span> {
   <span class="keyword">let</span> <span class="variable">latitude</span>: <span class="type">Double</span>
   <span class="keyword">let</span> <span class="variable">longitude</span>: <span class="type">Double</span>
}
</code></pre></body></html>
<p>Let's call it <em>Part</em>. Both, this state and its reducer will be part of an external framework, used by dozens of
apps. Internally probably the <code>Reducer</code> will receive some known <code>ActionType</code> and calculate a new location. On the
main app we have a global state, that we now call <em>Whole</em>.</p>

<html><body><pre class="highlight"><code><span class="keyword">struct</span> <span class="type">MyGlobalState</span> {
   <span class="keyword">let</span> <span class="variable">title</span>: <span class="type">String</span>?
   <span class="keyword">let</span> <span class="variable">listOfItems</span>: [<span class="type">Item</span>]
   <span class="keyword">let</span> <span class="variable">currentLocation</span>: <span class="type">Location</span>
}
</code></pre></body></html>
<p>As expected, <em>Part</em> (<code>Location</code>) is a property of <em>Whole</em> (<code>MyGlobalState</code>). This relationship could be less
direct, for example there could be several levels of properties until you find the <em>Part</em> in the <em>Whole</em>, like
<code>global.firstLevel.secondLevel.currentLocation</code>, but let's keep it a single-level for this example.</p>

<p>Because our <code>Store</code> understands <em>Whole</em> (<code>MyGlobalState</code>) and our <code>gpsReducer</code> understands <em>Part</em> (<code>Location</code>), we
must <code>lift</code> the <code>Reducer</code> to the <em>Whole</em> level, by using:</p>

<html><body><pre class="highlight"><code><span class="keyword">let</span> <span class="variable">globalStateReducer</span> = <span class="variable">gpsReducer</span>.<span class="type">lift</span>(<span class="variable">actionGetter</span>: { <span class="variable">$0</span> },
                                         <span class="variable">stateGetter</span>: { <span class="variable">global</span> <span class="keyword">in</span> <span class="keyword">return</span> <span class="variable">global</span>.<span class="type">currentLocation</span> },
                                         <span class="variable">stateSetter</span>: { <span class="variable">global</span>, <span class="variable">part</span> <span class="keyword">in</span> <span class="variable">global</span>.<span class="type">currentLocation</span> = <span class="variable">path</span> })
</code></pre></body></html>
<p>Now this reducer can be used within our <code>Store</code> or even composed with others. It also can be used in other apps as
long as we have a way to lift it to the world of <em>Whole</em>.</p>

<p>Same strategy works for the <code>action</code>, as you can guess by the <code>actionGetter</code> parameter. You can provide a function
that takes a global action (<em>Whole</em>) and returns an optional local action (<em>Part</em>). It's optional because perhaps
you want to ignore actions that are not relevant for this reducer.</p>

</div>
<h4>Parameters</h4>

<table class="parameters">
  <thead hidden>
  <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
  </tr>
  </thead>
  <tbody>
    <tr>
    <th>action​Getter</th>
    <td><code class="type">@escaping (Global​Action​Type) -&gt; Action​Type?</code></td></td>
    <td><ul>
<li>actionGetter: a way to convert a global action into a local action, but it's optional because maybe this reducer shouldn't care about certain actions. Because actions are usually enums, you can switch over the enum and in case it's nothing you care about, you simply return nil in the closure. If you don't want to lift this reducer in terms of <code>action</code>, just provide the identity function <code>{ $0 }</code> as input.</li>
</ul>
</td>
</tr>
<tr>
    <th>state​Getter</th>
    <td><code class="type">@escaping (Global​State​Type) -&gt; State​Type</code></td></td>
    <td><ul>
<li>stateGetter: a way to read from a global state and extract only the part that it's relevant for this reducer, by traversing the tree of the global state until you find the property you want, for example: <code>{ $0.currentGame.scoreBoard }</code></li>
</ul>
</td>
</tr>
<tr>
    <th>state​Setter</th>
    <td><code class="type">@escaping (inout Global​State​Type, State​Type) -&gt; Void</code></td></td>
    <td><ul>
<li>stateSetter: a way to write back into the global state once you finished reducing the <em>Part</em>, so now you have a new part that was calculated by this reducer and you want to set it into the global state, also provided as the first parameter as an <code>inout</code> property: <code>{ globalState, newScoreBoard in globalState.currentGame.scoreBoard = newScoreBoard }</code></li>
</ul>
</td>
</tr>
  </tbody>
</table>
  <h4>Returns</h4>
  <p>a <code>Reducer&lt;GlobalAction, GlobalState&gt;</code> that maps actions and states from the original specialized reducer into a more generic and global reducer, to be used in a larger context.</p>

</div>
<div role="article" class="function" id="reducer.lift(action:state:)">
    <h3>
        <code>lift(action:​state:​)</code>
    </h3>
    <html><body><pre class="highlight"><code><span class="keyword">public</span> <span class="keyword">func</span> <span class="function">lift</span>&lt;<span class="variable">GlobalActionType</span>, <span class="variable">GlobalStateType</span>&gt;(<span class="variable">action</span>: <span class="type">KeyPath</span>&lt;<span class="type">GlobalActionType</span>, <span class="type">ActionType</span>?&gt;, <span class="variable">state</span>: <span class="type">WritableKeyPath</span>&lt;<span class="type">GlobalStateType</span>, <span class="type">StateType</span>&gt;) -&gt; <a href="/Reducer"><span class="type">Reducer</span></a>&lt;<span class="type">GlobalActionType</span>, <span class="type">GlobalStateType</span>&gt;</code></pre></body></html>
<div class="summary" role="doc-abstract">
    <p>A type-lifting method. The global state of your app is <em>Whole</em>, and the <code>Reducer</code> handles <em>Part</em>, that is a
sub-state.</p>

</div>
<div class="discussion">
    <p>Let's suppose you may want to have a <code>gpsReducer</code> that knows about the following <code>struct</code>:</p>

<html><body><pre class="highlight"><code><span class="keyword">struct</span> <span class="type">Location</span> {
   <span class="keyword">let</span> <span class="variable">latitude</span>: <span class="type">Double</span>
   <span class="keyword">let</span> <span class="variable">longitude</span>: <span class="type">Double</span>
}
</code></pre></body></html>
<p>Let's call it <em>Part</em>. Both, this state and its reducer will be part of an external framework, used by dozens of
apps. Internally probably the <code>Reducer</code> will receive some known <code>ActionType</code> and calculate a new location. On the
main app we have a global state, that we now call <em>Whole</em>.</p>

<html><body><pre class="highlight"><code><span class="keyword">struct</span> <span class="type">MyGlobalState</span> {
   <span class="keyword">let</span> <span class="variable">title</span>: <span class="type">String</span>?
   <span class="keyword">let</span> <span class="variable">listOfItems</span>: [<span class="type">Item</span>]
   <span class="keyword">let</span> <span class="variable">currentLocation</span>: <span class="type">Location</span>
}
</code></pre></body></html>
<p>As expected, <em>Part</em> (<code>Location</code>) is a property of <em>Whole</em> (<code>MyGlobalState</code>). This relationship could be less
direct, for example there could be several levels of properties until you find the <em>Part</em> in the <em>Whole</em>, like
<code>global.firstLevel.secondLevel.currentLocation</code>, but let's keep it a single-level for this example.</p>

<p>Because our <code>Store</code> understands <em>Whole</em> (<code>MyGlobalState</code>) and our <code>gpsReducer</code> understands <em>Part</em> (<code>Location</code>), we
must <code>lift</code> the <code>Reducer</code> to the <em>Whole</em> level, by using:</p>

<html><body><pre class="highlight"><code><span class="keyword">let</span> <span class="variable">globalStateReducer</span> = <span class="variable">gpsReducer</span>.<span class="type">lift</span>(<span class="variable">action</span>: \.<span class="type">locationActions</span>,
                                         <span class="variable">state</span>: \.<span class="type">currentLocation</span>)
</code></pre></body></html>
<p>Now this reducer can be used within our <code>Store</code> or even composed with others. It also can be used in other apps as
long as we have a way to lift it to the world of <em>Whole</em>.</p>

<p>Same strategy works for the <code>action</code>, as you can guess by the <code>action</code> parameter. You can provide a key-path that
traverses from a global action (<em>Whole</em>) and to an optional local action (<em>Part</em>). It's optional because perhaps
you want to ignore actions that are not relevant for this reducer.</p>

</div>
<h4>Parameters</h4>

<table class="parameters">
  <thead hidden>
  <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
  </tr>
  </thead>
  <tbody>
    <tr>
    <th>action</th>
    <td><code class="type">Key​Path&lt;Global​Action​Type, Action​Type?&gt;</code></td></td>
    <td><ul>
<li>action: a read-only key-path from global action into a local action, but it's optional because maybe this reducer shouldn't care about certain actions. Because actions are usually enums, you can switch over the enum and in case it's nothing you care about, you simply return nil in the closure. If you don't want to lift this reducer in terms of <code>action</code>, just remove this parameter from the call.</li>
</ul>
</td>
</tr>
<tr>
    <th>state</th>
    <td><code class="type">Writable​Key​Path&lt;Global​State​Type, State​Type&gt;</code></td></td>
    <td><ul>
<li>state: a writable key-path from global state that traverses into a local state, by extracting only the part that it's relevant for this reducer. This will also be used to set the new local state into the global state once the reducer finishes it's operation. For example: <code>\.currentGame.scoreBoard</code>.</li>
</ul>
</td>
</tr>
  </tbody>
</table>
  <h4>Returns</h4>
  <p>a <code>Reducer&lt;GlobalAction, GlobalState&gt;</code> that maps actions and states from the original specialized reducer into a more generic and global reducer, to be used in a larger context.</p>

</div>
<div role="article" class="function" id="reducer.lift(state:)">
    <h3>
        <code>lift(state:​)</code>
    </h3>
    <html><body><pre class="highlight"><code><span class="keyword">public</span> <span class="keyword">func</span> <span class="function">lift</span>&lt;<span class="variable">GlobalStateType</span>&gt;(<span class="variable">state</span>: <span class="type">WritableKeyPath</span>&lt;<span class="type">GlobalStateType</span>, <span class="type">StateType</span>&gt;) -&gt; <a href="/Reducer"><span class="type">Reducer</span></a>&lt;<span class="type">ActionType</span>, <span class="type">GlobalStateType</span>&gt;</code></pre></body></html>
<div class="summary" role="doc-abstract">
    <p>A type-lifting method. The global state of your app is <em>Whole</em>, and the <code>Reducer</code> handles <em>Part</em>, that is a
sub-state.</p>

</div>
<div class="discussion">
    <p>Let's suppose you may want to have a <code>gpsReducer</code> that knows about the following <code>struct</code>:</p>

<html><body><pre class="highlight"><code><span class="keyword">struct</span> <span class="type">Location</span> {
   <span class="keyword">let</span> <span class="variable">latitude</span>: <span class="type">Double</span>
   <span class="keyword">let</span> <span class="variable">longitude</span>: <span class="type">Double</span>
}
</code></pre></body></html>
<p>Let's call it <em>Part</em>. Both, this state and its reducer will be part of an external framework, used by dozens of
apps. Internally probably the <code>Reducer</code> will receive some known <code>ActionType</code> and calculate a new location. On the
main app we have a global state, that we now call <em>Whole</em>.</p>

<html><body><pre class="highlight"><code><span class="keyword">struct</span> <span class="type">MyGlobalState</span> {
   <span class="keyword">let</span> <span class="variable">title</span>: <span class="type">String</span>?
   <span class="keyword">let</span> <span class="variable">listOfItems</span>: [<span class="type">Item</span>]
   <span class="keyword">let</span> <span class="variable">currentLocation</span>: <span class="type">Location</span>
}
</code></pre></body></html>
<p>As expected, <em>Part</em> (<code>Location</code>) is a property of <em>Whole</em> (<code>MyGlobalState</code>). This relationship could be less
direct, for example there could be several levels of properties until you find the <em>Part</em> in the <em>Whole</em>, like
<code>global.firstLevel.secondLevel.currentLocation</code>, but let's keep it a single-level for this example.</p>

<p>Because our <code>Store</code> understands <em>Whole</em> (<code>MyGlobalState</code>) and our <code>gpsReducer</code> understands <em>Part</em> (<code>Location</code>), we
must <code>lift</code> the <code>Reducer</code> to the <em>Whole</em> level, by using:</p>

<html><body><pre class="highlight"><code><span class="keyword">let</span> <span class="variable">globalStateReducer</span> = <span class="variable">gpsReducer</span>.<span class="type">lift</span>(<span class="variable">state</span>: \.<span class="type">currentLocation</span>)
</code></pre></body></html>
<p>Now this reducer can be used within our <code>Store</code> or even composed with others. It also can be used in other apps as
long as we have a way to lift it to the world of <em>Whole</em>.</p>

<p>Same strategy works for the <code>action</code>, just check the other available signatures for <code>lift</code> function.</p>

</div>
<h4>Parameters</h4>

<table class="parameters">
  <thead hidden>
  <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
  </tr>
  </thead>
  <tbody>
    <tr>
    <th>state</th>
    <td><code class="type">Writable​Key​Path&lt;Global​State​Type, State​Type&gt;</code></td></td>
    <td><ul>
<li>state: a writable key-path from global state that traverses into a local state, by extracting only the part that it's relevant for this reducer. This will also be used to set the new local state into the global state once the reducer finishes it's operation. For example: <code>\.currentGame.scoreBoard</code>.</li>
</ul>
</td>
</tr>
  </tbody>
</table>
  <h4>Returns</h4>
  <p>a <code>Reducer&lt;ActionType, GlobalState&gt;</code> that maps actions and states from the original specialized reducer into a more generic and global reducer, to be used in a larger context.</p>

</div>
<div role="article" class="function" id="reducer.lift(action:)">
    <h3>
        <code>lift(action:​)</code>
    </h3>
    <html><body><pre class="highlight"><code><span class="keyword">public</span> <span class="keyword">func</span> <span class="function">lift</span>&lt;<span class="variable">GlobalActionType</span>&gt;(<span class="variable">action</span>: <span class="type">KeyPath</span>&lt;<span class="type">GlobalActionType</span>, <span class="type">ActionType</span>?&gt;) -&gt; <a href="/Reducer"><span class="type">Reducer</span></a>&lt;<span class="type">GlobalActionType</span>, <span class="type">StateType</span>&gt;</code></pre></body></html>
<div class="summary" role="doc-abstract">
    <p>A type-lifting method. The global state of your app is <em>Whole</em>, and the <code>Reducer</code> handles <em>Part</em>, that is a
sub-state.</p>

</div>
<div class="discussion">
    <p>Let's suppose you may want to have a <code>gpsReducer</code> that knows about the following <code>struct</code>:</p>

<html><body><pre class="highlight"><code><span class="keyword">struct</span> <span class="type">Location</span> {
   <span class="keyword">let</span> <span class="variable">latitude</span>: <span class="type">Double</span>
   <span class="keyword">let</span> <span class="variable">longitude</span>: <span class="type">Double</span>
}
</code></pre></body></html>
<p>Let's call it <em>Part</em>. Both, this state and its reducer will be part of an external framework, used by dozens of
apps. Internally probably the <code>Reducer</code> will receive some known <code>ActionType</code> and calculate a new location. On the
main app we have a global state, that we now call <em>Whole</em>.</p>

<html><body><pre class="highlight"><code><span class="keyword">struct</span> <span class="type">MyGlobalState</span> {
   <span class="keyword">let</span> <span class="variable">title</span>: <span class="type">String</span>?
   <span class="keyword">let</span> <span class="variable">listOfItems</span>: [<span class="type">Item</span>]
   <span class="keyword">let</span> <span class="variable">currentLocation</span>: <span class="type">Location</span>
}
</code></pre></body></html>
<p>As expected, <em>Part</em> (<code>Location</code>) is a property of <em>Whole</em> (<code>MyGlobalState</code>). This relationship could be less
direct, for example there could be several levels of properties until you find the <em>Part</em> in the <em>Whole</em>, like
<code>global.firstLevel.secondLevel.currentLocation</code>, but let's keep it a single-level for this example.</p>

<p>Because our <code>Store</code> understands <em>Whole</em> (<code>MyGlobalState</code>) and our <code>gpsReducer</code> understands <em>Part</em> (<code>Location</code>), we
must <code>lift</code> the <code>Reducer</code> to the <em>Whole</em> level, by using:</p>

<html><body><pre class="highlight"><code><span class="keyword">let</span> <span class="variable">globalStateReducer</span> = <span class="variable">gpsReducer</span>.<span class="type">lift</span>(<span class="variable">action</span>: \.<span class="type">locationActions</span>)
</code></pre></body></html>
<p>Now this reducer can be used within our <code>Store</code> or even composed with others. It also can be used in other apps as
long as we have a way to lift it to the world of <em>Whole</em>.</p>

<p>Same strategy works for the <code>action</code>, as you can guess by the <code>action</code> parameter. You can provide a key-path that
traverses from a global action (<em>Whole</em>) and to an optional local action (<em>Part</em>). It's optional because perhaps
you want to ignore actions that are not relevant for this reducer.</p>

</div>
<h4>Parameters</h4>

<table class="parameters">
  <thead hidden>
  <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
  </tr>
  </thead>
  <tbody>
    <tr>
    <th>action</th>
    <td><code class="type">Key​Path&lt;Global​Action​Type, Action​Type?&gt;</code></td></td>
    <td><ul>
<li>action: a read-only key-path from global action into a local action, but it's optional because maybe this reducer shouldn't care about certain actions. Because actions are usually enums, you can switch over the enum and in case it's nothing you care about, you simply return nil in the closure. If you don't want to lift this reducer in terms of <code>action</code>, just remove this parameter from the call.</li>
</ul>
</td>
</tr>
  </tbody>
</table>
  <h4>Returns</h4>
  <p>a <code>Reducer&lt;GlobalAction, StateType&gt;</code> that maps actions and states from the original specialized reducer into a more generic and global reducer, to be used in a larger context.</p>

</div>
    </section>



        </article>
    </main>

    <footer>
        <p>
    Generated on <time datetime="2020-05-29T03:19:03+0200">29. May 2020</time> using <a href="https://github.com/SwiftDocOrg/swift-doc">swift-doc</a> <span class="version">1.0.0-beta.3</span>.
</p>
    </footer>
</body>
</html>
