<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SwiftRex - MiddlewareReader</title>
    <link rel="stylesheet" type="text/css" href="/all.css" media="all" />
</head>
<body>
    <header>
        <a href="/">
            <strong>
                SwiftRex
            </strong>
            <span>Documentation</span>
        </a>
        <sup>Beta</sup>
    </header>

    <!--
    <form class="search">
        <input type="search" placeholder="Search" />
    </form>
    -->

    <nav>
        <div class="wrapper">
            <h2>On This Page</h2>
            <ol><li><a href="#relationships">Relationships</a><ul><li><a href="#relationships">Conforms To</a></li></ul></li><li><a href="#initializers">Initializers</a><ul><li class="initializer"><a href="#middlewarereader.init(inject:)">init(inject:​)</a></li></ul></li><li><a href="#properties">Properties</a><ul><li class="variable"><a href="#middlewarereader.inject">inject</a></li></ul></li><li><a href="#methods">Methods</a><ul><li class="function"><a href="#middlewarereader.lifttocollection(inputaction:outputaction:statecollection:)">lift​ToCollection(input​Action:​output​Action:​state​Collection:​)</a></li><li class="function"><a href="#middlewarereader.lifttocollection(action:statecollection:)">lift​ToCollection(action:​state​Collection:​)</a></li><li class="function"><a href="#middlewarereader.lifttocollection(inputaction:outputaction:statecollection:)">lift​ToCollection(input​Action:​output​Action:​state​Collection:​)</a></li><li class="function"><a href="#middlewarereader.lifttocollection(action:statecollection:)">lift​ToCollection(action:​state​Collection:​)</a></li><li class="function"><a href="#middlewarereader.lifttocollection(inputaction:outputaction:statecollection:)">lift​ToCollection(input​Action:​output​Action:​state​Collection:​)</a></li><li class="function"><a href="#middlewarereader.lifttocollection(action:statecollection:)">lift​ToCollection(action:​state​Collection:​)</a></li></ul></li></ol>
        </div>
    </nav>

    <main>
        <article>
            <h1>
    <small>Structure</small>
    <code class="name">Middleware​Reader</code>
</h1>

<html><body><pre class="highlight"><code><span class="keyword">public</span> <span class="keyword">struct</span> <span class="type">MiddlewareReader</span>&lt;<span class="variable">Dependencies</span>, <span class="variable">MiddlewareType</span>: <a href="/Middleware"><span class="type">Middleware</span></a>&gt;: <a href="/MiddlewareReaderProtocol"><span class="type">MiddlewareReaderProtocol</span></a></code></pre></body></html>
<div class="summary" role="doc-abstract">
    <p>A MiddlewareReader is a way to lazily inject dependencies into a Middleware. For example, you may want to compose multiple middlewares but from
a library, and in this library you don't have the dependencies to inject just yet, because these dependencies are only present in the main target.
That way, instead of creating the middlewares (which would require all the dependencies), you can wrap their initializers in a MiddlewareReader.
The middleware reader is not a middleware, is a a factory (in OOP terms) from <code>(Dependencies) -&gt; MiddlewareType</code> (in FP approach). The benefit
of wrapping the middleware initializers in a MiddlewareReader is that, for all means, MiddlewareReaders can be composed as Middlewares, can be
lifted as Middlewares, but all of this without in fact creating the Middlewares.
Your library can then expose a single MiddlewareReader as public, and you keep all its middlewares as internal classes. From the main target you
compose this MiddlewareReader with other MiddlewareReaders coming from other libraries and from the main target itself. Somewhere where you create
the Store, you finally inject the dependencies at once and you materialize all your middlewares at the same time.
Remember that &quot;inject then compose&quot; is the same as &quot;compose then inject&quot;, but while the former needs dependencies upfront, the latter is more
flexible for being lazy.
For those familiar with Functional Programming, this is similar to Reader Monad, but as SwiftRex recommends dependencies only on Middlewares,
this Reader works specifically with Middlewares.</p>

</div>
<section id="relationships">
    <h2 hidden>Relationships</h2>
        <figure>
    <?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN"
 "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<!-- Generated by graphviz version 2.44.0 (20200408.0750)
 -->
<!-- Pages: 1 -->
<svg width="872pt" height="116pt"
 viewBox="0.00 0.00 872.00 116.00" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
<g id="graph0" class="graph" transform="scale(1 1) rotate(0) translate(4 112)">
<polygon fill="white" stroke="transparent" points="-4,4 -4,-112 868,-112 868,4 -4,4"/>
<!-- MiddlewareReader -->
<g id="node1" class="node structure current">
<title>MiddlewareReader</title>
<g id="a_node1"><a xlink:href="/MiddlewareReader" xlink:title="MiddlewareReader">
<path fill="none" stroke="black" stroke-width="3" d="M528,-108C528,-108 336,-108 336,-108 330,-108 324,-102 324,-96 324,-96 324,-84 324,-84 324,-78 330,-72 336,-72 336,-72 528,-72 528,-72 534,-72 540,-78 540,-84 540,-84 540,-96 540,-96 540,-102 534,-108 528,-108"/>
<text text-anchor="middle" x="432" y="-86.3" font-family="Menlo" font-size="14.00">MiddlewareReader</text>
</a>
</g>
</g>
<!-- MiddlewareReaderProtocol -->
<g id="node2" class="node protocol">
<title>MiddlewareReaderProtocol</title>
<g id="a_node2"><a xlink:href="/MiddlewareReaderProtocol" xlink:title="MiddlewareReaderProtocol">
<path fill="none" stroke="black" d="M528,-36C528,-36 336,-36 336,-36 330,-36 324,-30 324,-24 324,-24 324,-12 324,-12 324,-6 330,0 336,0 336,0 528,0 528,0 534,0 540,-6 540,-12 540,-12 540,-24 540,-24 540,-30 534,-36 528,-36"/>
<text text-anchor="middle" x="432" y="-14.3" font-family="Menlo" font-size="14.00">MiddlewareReaderProtocol</text>
</a>
</g>
</g>
<!-- MiddlewareReader&#45;&gt;MiddlewareReaderProtocol -->
<g id="edge1" class="edge conformsTo">
<title>MiddlewareReader&#45;&gt;MiddlewareReaderProtocol</title>
<path fill="none" stroke="black" d="M432,-71.7C432,-63.98 432,-54.71 432,-46.11"/>
<polygon fill="black" stroke="black" points="435.5,-46.1 432,-36.1 428.5,-46.1 435.5,-46.1"/>
</g>
</g>
</svg>


    <figcaption hidden>Inheritance graph for MiddlewareReader.</figcaption>
</figure>
        <h3>Conforms To</h3>
<dl>
    <dt class="protocol"><code><a href="/MiddlewareReaderProtocol">MiddlewareReaderProtocol</a></code></dt>
<dd><p>A protocol to generalize MiddlewareReader. Unless you look for some very special behaviour, you should use MiddlewareReader directly which
provides everything needed for your Middleware dependency injection.</p>
</dd>
</dl>
</section>
    <section id="initializers">
        <h2>Initializers</h2>

        <div role="article" class="initializer" id="middlewarereader.init(inject:)">
    <h3>
        <code>init(inject:​)</code>
    </h3>
    <html><body><pre class="highlight"><code><span class="keyword">public</span> <span class="keyword">init</span>(<span class="variable">inject</span>: <span class="attribute">@</span><span class="attribute">escaping</span> (<span class="type">Dependencies</span>) -&gt; <span class="type">MiddlewareType</span>)</code></pre></body></html>
<div class="summary" role="doc-abstract">
    <p>Allows to define a middleware initializer and store this initializer function until we have the dependencies to call it.
This allows us to postpone the dependency injection and compose middlewares that are not even materialized yet.</p>

</div>
<h4>Parameters</h4>

<table class="parameters">
  <thead hidden>
  <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
  </tr>
  </thead>
  <tbody>
    <tr>
    <th>inject</th>
    <td><code class="type">@escaping (Dependencies) -&gt; Middleware​Type</code></td>
    <td><p>An initializer function that, given the dependencies in the Middleware's init, will give the Middleware instance When inject is called, your MiddlewareReader materializes into a Middleware.</p>
</td>
</tr>
  </tbody>
</table>
</div>
    </section>
    <section id="properties">
        <h2>Properties</h2>

        <div role="article" class="variable" id="middlewarereader.inject">
    <h3>
        <code>inject</code>
    </h3>
    <html><body><pre class="highlight"><code><span class="keyword">let</span> <span class="variable">inject</span>: (<span class="type">Dependencies</span>) -&gt; <span class="type">MiddlewareType</span></code></pre></body></html>
<div class="summary" role="doc-abstract">
    <p>An initializer function that, given the dependencies in the Middleware's init, will give the Middleware instance
When inject is called, your MiddlewareReader materializes into a Middleware.</p>

</div>
</div>
    </section>
    <section id="methods">
        <h2>Methods</h2>

        <div role="article" class="function" id="middlewarereader.lifttocollection(inputaction:outputaction:statecollection:)">
    <h3>
        <code>lift​ToCollection(input​Action:​output​Action:​state​Collection:​)</code>
    </h3>
    <html><body><pre class="highlight"><code><span class="attribute">@</span><span class="attribute">available</span>(<span class="keyword">macOS</span> <span class="number literal">10.15</span>, <span class="keyword">iOS</span> <span class="number literal">13.0</span>, <span class="keyword">tvOS</span> <span class="number literal">13.0</span>, <span class="keyword">watchOS</span> <span class="number literal">6.0</span>, *) <span class="keyword">public</span> <span class="keyword">func</span> <span class="function">liftToCollection</span>&lt;<span class="variable">ItemInputActionType</span>, <span class="variable">ItemOutputActionType</span>, <span class="variable">ItemStateType</span>, <span class="variable">GlobalAction</span>, <span class="variable">GlobalState</span>, <span class="variable">CollectionState</span>&gt;(<span class="variable">inputAction</span> <span class="variable">actionMap</span>: <span class="attribute">@</span><span class="attribute">escaping</span> (<span class="type">GlobalAction</span>) -&gt; <a href="/ElementIDAction"><span class="type">ElementIDAction</span></a>&lt;<span class="type">ItemStateType</span>.<span class="type">ID</span>, <span class="type">ItemInputActionType</span>&gt;?, <span class="variable">outputAction</span> <span class="variable">outputMap</span>: <span class="attribute">@</span><span class="attribute">escaping</span> (<a href="/ElementIDAction"><span class="type">ElementIDAction</span></a>&lt;<span class="type">ItemStateType</span>.<span class="type">ID</span>, <span class="type">ItemOutputActionType</span>&gt;) -&gt; <span class="type">GlobalAction</span>, <span class="variable">stateCollection</span>: <span class="attribute">@</span><span class="attribute">escaping</span> (<span class="type">GlobalState</span>) -&gt; <span class="type">CollectionState</span>) -&gt; <a href="/MiddlewareReader"><span class="type">MiddlewareReader</span></a>&lt;<span class="type">Dependencies</span>, <span class="type">EffectMiddleware</span>&lt;<span class="type">GlobalAction</span>, <span class="type">GlobalAction</span>, <span class="type">GlobalState</span>, <span class="type">Dependencies</span>&gt;&gt; <span class="keyword">where</span> <span class="type">CollectionState</span>: <span class="type">MutableCollection</span>, <span class="type">CollectionState</span>.<span class="type">Element</span> == <span class="type">ItemStateType</span>, <span class="type">MiddlewareType</span> == <span class="type">EffectMiddleware</span>&lt;<span class="type">ItemInputActionType</span>, <span class="type">ItemOutputActionType</span>, <span class="type">ItemStateType</span>, <span class="type">Dependencies</span>&gt;, <span class="type">ItemStateType</span>: <span class="type">Identifiable</span></code></pre></body></html>
</div>
<div role="article" class="function" id="middlewarereader.lifttocollection(action:statecollection:)">
    <h3>
        <code>lift​ToCollection(action:​state​Collection:​)</code>
    </h3>
    <html><body><pre class="highlight"><code><span class="attribute">@</span><span class="attribute">available</span>(<span class="keyword">macOS</span> <span class="number literal">10.15</span>, <span class="keyword">iOS</span> <span class="number literal">13.0</span>, <span class="keyword">tvOS</span> <span class="number literal">13.0</span>, <span class="keyword">watchOS</span> <span class="number literal">6.0</span>, *) <span class="keyword">public</span> <span class="keyword">func</span> <span class="function">liftToCollection</span>&lt;<span class="variable">ItemActionType</span>, <span class="variable">ItemStateType</span>, <span class="variable">GlobalAction</span>, <span class="variable">GlobalState</span>, <span class="variable">CollectionState</span>: <span class="type">MutableCollection</span>&gt;(<span class="variable">action</span> <span class="variable">actionMap</span>: <span class="type">WritableKeyPath</span>&lt;<span class="type">GlobalAction</span>, <a href="/ElementIDAction"><span class="type">ElementIDAction</span></a>&lt;<span class="type">ItemStateType</span>.<span class="type">ID</span>, <span class="type">ItemActionType</span>&gt;?&gt;, <span class="variable">stateCollection</span>: <span class="type">KeyPath</span>&lt;<span class="type">GlobalState</span>, <span class="type">CollectionState</span>&gt;) -&gt; <a href="/MiddlewareReader"><span class="type">MiddlewareReader</span></a>&lt;<span class="type">Dependencies</span>, <span class="type">EffectMiddleware</span>&lt;<span class="type">GlobalAction</span>, <span class="type">GlobalAction</span>, <span class="type">GlobalState</span>, <span class="type">Dependencies</span>&gt;&gt; <span class="keyword">where</span> <span class="type">CollectionState</span>.<span class="type">Element</span> == <span class="type">ItemStateType</span>, <span class="type">MiddlewareType</span> == <span class="type">EffectMiddleware</span>&lt;<span class="type">ItemActionType</span>, <span class="type">ItemActionType</span>, <span class="type">ItemStateType</span>, <span class="type">Dependencies</span>&gt;, <span class="type">ItemStateType</span>: <span class="type">Identifiable</span></code></pre></body></html>
</div>
<div role="article" class="function" id="middlewarereader.lifttocollection(inputaction:outputaction:statecollection:)">
    <h3>
        <code>lift​ToCollection(input​Action:​output​Action:​state​Collection:​)</code>
    </h3>
    <html><body><pre class="highlight"><code><span class="keyword">public</span> <span class="keyword">func</span> <span class="function">liftToCollection</span>&lt;<span class="variable">ItemInputActionType</span>, <span class="variable">ItemOutputActionType</span>, <span class="variable">ItemStateType</span>, <span class="variable">GlobalAction</span>, <span class="variable">GlobalState</span>, <span class="variable">CollectionState</span>&gt;(<span class="variable">inputAction</span> <span class="variable">actionMap</span>: <span class="attribute">@</span><span class="attribute">escaping</span> (<span class="type">GlobalAction</span>) -&gt; <a href="/ElementIDAction"><span class="type">ElementIDAction</span></a>&lt;<span class="type">ItemStateType</span>.<span class="type">ID</span>, <span class="type">ItemInputActionType</span>&gt;?, <span class="variable">outputAction</span> <span class="variable">outputMap</span>: <span class="attribute">@</span><span class="attribute">escaping</span> (<a href="/ElementIDAction"><span class="type">ElementIDAction</span></a>&lt;<span class="type">ItemStateType</span>.<span class="type">ID</span>, <span class="type">ItemOutputActionType</span>&gt;) -&gt; <span class="type">GlobalAction</span>, <span class="variable">stateCollection</span>: <span class="attribute">@</span><span class="attribute">escaping</span> (<span class="type">GlobalState</span>) -&gt; <span class="type">CollectionState</span>) -&gt; <a href="/MiddlewareReader"><span class="type">MiddlewareReader</span></a>&lt;<span class="type">Dependencies</span>, <span class="type">EffectMiddleware</span>&lt;<span class="type">GlobalAction</span>, <span class="type">GlobalAction</span>, <span class="type">GlobalState</span>, <span class="type">Dependencies</span>&gt;&gt; <span class="keyword">where</span> <span class="type">CollectionState</span>: <span class="type">MutableCollection</span>, <span class="type">CollectionState</span>.<span class="type">Element</span> == <span class="type">ItemStateType</span>, <span class="type">MiddlewareType</span> == <span class="type">EffectMiddleware</span>&lt;<span class="type">ItemInputActionType</span>, <span class="type">ItemOutputActionType</span>, <span class="type">ItemStateType</span>, <span class="type">Dependencies</span>&gt;, <span class="type">ItemStateType</span>: <span class="type">Identifiable</span></code></pre></body></html>
</div>
<div role="article" class="function" id="middlewarereader.lifttocollection(action:statecollection:)">
    <h3>
        <code>lift​ToCollection(action:​state​Collection:​)</code>
    </h3>
    <html><body><pre class="highlight"><code><span class="keyword">public</span> <span class="keyword">func</span> <span class="function">liftToCollection</span>&lt;<span class="variable">ItemActionType</span>, <span class="variable">ItemStateType</span>, <span class="variable">GlobalAction</span>, <span class="variable">GlobalState</span>, <span class="variable">CollectionState</span>: <span class="type">MutableCollection</span>&gt;(<span class="variable">action</span> <span class="variable">actionMap</span>: <span class="type">WritableKeyPath</span>&lt;<span class="type">GlobalAction</span>, <a href="/ElementIDAction"><span class="type">ElementIDAction</span></a>&lt;<span class="type">ItemStateType</span>.<span class="type">ID</span>, <span class="type">ItemActionType</span>&gt;?&gt;, <span class="variable">stateCollection</span>: <span class="type">KeyPath</span>&lt;<span class="type">GlobalState</span>, <span class="type">CollectionState</span>&gt;) -&gt; <a href="/MiddlewareReader"><span class="type">MiddlewareReader</span></a>&lt;<span class="type">Dependencies</span>, <span class="type">EffectMiddleware</span>&lt;<span class="type">GlobalAction</span>, <span class="type">GlobalAction</span>, <span class="type">GlobalState</span>, <span class="type">Dependencies</span>&gt;&gt; <span class="keyword">where</span> <span class="type">CollectionState</span>.<span class="type">Element</span> == <span class="type">ItemStateType</span>, <span class="type">MiddlewareType</span> == <span class="type">EffectMiddleware</span>&lt;<span class="type">ItemActionType</span>, <span class="type">ItemActionType</span>, <span class="type">ItemStateType</span>, <span class="type">Dependencies</span>&gt;, <span class="type">ItemStateType</span>: <span class="type">Identifiable</span></code></pre></body></html>
</div>
<div role="article" class="function" id="middlewarereader.lifttocollection(inputaction:outputaction:statecollection:)">
    <h3>
        <code>lift​ToCollection(input​Action:​output​Action:​state​Collection:​)</code>
    </h3>
    <html><body><pre class="highlight"><code><span class="keyword">public</span> <span class="keyword">func</span> <span class="function">liftToCollection</span>&lt;<span class="variable">ItemInputActionType</span>, <span class="variable">ItemOutputActionType</span>, <span class="variable">ItemStateType</span>, <span class="variable">GlobalAction</span>, <span class="variable">GlobalState</span>, <span class="variable">CollectionState</span>&gt;(<span class="variable">inputAction</span> <span class="variable">actionMap</span>: <span class="attribute">@</span><span class="attribute">escaping</span> (<span class="type">GlobalAction</span>) -&gt; <a href="/ElementIDAction"><span class="type">ElementIDAction</span></a>&lt;<span class="type">ItemStateType</span>.<span class="type">ID</span>, <span class="type">ItemInputActionType</span>&gt;?, <span class="variable">outputAction</span> <span class="variable">outputMap</span>: <span class="attribute">@</span><span class="attribute">escaping</span> (<a href="/ElementIDAction"><span class="type">ElementIDAction</span></a>&lt;<span class="type">ItemStateType</span>.<span class="type">ID</span>, <span class="type">ItemOutputActionType</span>&gt;) -&gt; <span class="type">GlobalAction</span>, <span class="variable">stateCollection</span>: <span class="attribute">@</span><span class="attribute">escaping</span> (<span class="type">GlobalState</span>) -&gt; <span class="type">CollectionState</span>) -&gt; <a href="/MiddlewareReader"><span class="type">MiddlewareReader</span></a>&lt;<span class="type">Dependencies</span>, <span class="type">EffectMiddleware</span>&lt;<span class="type">GlobalAction</span>, <span class="type">GlobalAction</span>, <span class="type">GlobalState</span>, <span class="type">Dependencies</span>&gt;&gt; <span class="keyword">where</span> <span class="type">CollectionState</span>: <span class="type">MutableCollection</span>, <span class="type">CollectionState</span>.<span class="type">Element</span> == <span class="type">ItemStateType</span>, <span class="type">MiddlewareType</span> == <span class="type">EffectMiddleware</span>&lt;<span class="type">ItemInputActionType</span>, <span class="type">ItemOutputActionType</span>, <span class="type">ItemStateType</span>, <span class="type">Dependencies</span>&gt;, <span class="type">ItemStateType</span>: <span class="type">Identifiable</span></code></pre></body></html>
</div>
<div role="article" class="function" id="middlewarereader.lifttocollection(action:statecollection:)">
    <h3>
        <code>lift​ToCollection(action:​state​Collection:​)</code>
    </h3>
    <html><body><pre class="highlight"><code><span class="keyword">public</span> <span class="keyword">func</span> <span class="function">liftToCollection</span>&lt;<span class="variable">ItemActionType</span>, <span class="variable">ItemStateType</span>, <span class="variable">GlobalAction</span>, <span class="variable">GlobalState</span>, <span class="variable">CollectionState</span>: <span class="type">MutableCollection</span>&gt;(<span class="variable">action</span> <span class="variable">actionMap</span>: <span class="type">WritableKeyPath</span>&lt;<span class="type">GlobalAction</span>, <a href="/ElementIDAction"><span class="type">ElementIDAction</span></a>&lt;<span class="type">ItemStateType</span>.<span class="type">ID</span>, <span class="type">ItemActionType</span>&gt;?&gt;, <span class="variable">stateCollection</span>: <span class="type">KeyPath</span>&lt;<span class="type">GlobalState</span>, <span class="type">CollectionState</span>&gt;) -&gt; <a href="/MiddlewareReader"><span class="type">MiddlewareReader</span></a>&lt;<span class="type">Dependencies</span>, <span class="type">EffectMiddleware</span>&lt;<span class="type">GlobalAction</span>, <span class="type">GlobalAction</span>, <span class="type">GlobalState</span>, <span class="type">Dependencies</span>&gt;&gt; <span class="keyword">where</span> <span class="type">CollectionState</span>.<span class="type">Element</span> == <span class="type">ItemStateType</span>, <span class="type">MiddlewareType</span> == <span class="type">EffectMiddleware</span>&lt;<span class="type">ItemActionType</span>, <span class="type">ItemActionType</span>, <span class="type">ItemStateType</span>, <span class="type">Dependencies</span>&gt;, <span class="type">ItemStateType</span>: <span class="type">Identifiable</span></code></pre></body></html>
</div>
    </section>



        </article>
    </main>

    <footer>
        <p>
    Generated on <time datetime="2020-11-08T00:34:01+0100">8. November 2020</time> using <a href="https://github.com/SwiftDocOrg/swift-doc">swift-doc</a> <span class="version">1.0.0-beta.5</span>.
</p>
    </footer>
</body>
</html>
