<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SwiftRex - ComposedMiddleware</title>
    <link rel="stylesheet" type="text/css" href="/all.css" media="all" />
</head>
<body>
    <header>
        <a href="/">
            <strong>
                SwiftRex
            </strong>
            <span>Documentation</span>
        </a>
        <sup>Beta</sup>
    </header>

    <!--
    <form class="search">
        <input type="search" placeholder="Search" />
    </form>
    -->

    <nav>
        <div class="wrapper">
            <h2>On This Page</h2>
            <ol><li><a href="#relationships">Relationships</a><ul><li><a href="#relationships">Conforms To</a></li></ul></li><li><a href="#initializers">Initializers</a><ul><li class="initializer"><a href="#composedmiddleware.init()">init()</a></li></ul></li><li><a href="#properties">Properties</a><ul><li class="property"><a href="#composedmiddleware.middlewares">middlewares</a></li></ul></li><li><a href="#methods">Methods</a><ul><li class="method"><a href="#composedmiddleware.append(middleware:)">append(middleware:​)</a></li><li class="method"><a href="#composedmiddleware.receivecontext(getstate:output:)">receive​Context(get​State:​output:​)</a></li><li class="method"><a href="#composedmiddleware.handle(action:from:afterreducer:)">handle(action:​from:​after​Reducer:​)</a></li></ul></li></ol>
        </div>
    </nav>

    <main>
        <article>
            <h1>
    <small>Structure</small>
    <code class="name">Composed​Middleware</code>
</h1>

<html><body><pre class="highlight"><code><span class="keyword">public</span> <span class="keyword">struct</span> <span class="type">ComposedMiddleware</span>&lt;<span class="variable">InputActionType</span>, <span class="variable">OutputActionType</span>, <span class="variable">StateType</span>&gt;: <a href="/Middleware"><span class="type">Middleware</span></a></code></pre></body></html>
<div class="summary" role="doc-abstract">
    <p>The <code>ComposedMiddleware</code> is a container of inner middlewares that are chained together in the order as they were composed. Whenever an <code>EventProtocol</code> or an <code>ActionProtocol</code> arrives to be handled by this <code>ComposedMiddleware</code>, it will delegate to its internal chain of middlewares.</p>

</div>
<div class="discussion">
    <p>It could be initialized manually by using the <code>init()</code> and configured by using the method <code>append(middleware:)</code>, but if you're ok with using custom operators you can compose two or more middlewares using the diamond operator:</p>

<html><body><pre class="highlight"><code><span class="keyword">let</span> <span class="variable">composedMiddleware</span> = <span class="variable">firstMiddleware</span> &lt;&gt; <span class="variable">secondMiddleware</span> &lt;&gt; <span class="variable">thirdMiddleware</span>
</code></pre></body></html>
</div>
<section id="relationships">
    <h2 hidden>Relationships</h2>
        <figure>
    <?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN"
 "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<!-- Generated by graphviz version 2.44.0 (20200408.0750)
 -->
<!-- Pages: 1 -->
<svg width="872pt" height="116pt"
 viewBox="0.00 0.00 872.00 116.00" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
<g id="graph0" class="graph" transform="scale(1 1) rotate(0) translate(4 112)">
<polygon fill="white" stroke="transparent" points="-4,4 -4,-112 868,-112 868,4 -4,4"/>
<!-- ComposedMiddleware -->
<g id="node1" class="node structure current">
<title>ComposedMiddleware</title>
<g id="a_node1"><a xlink:href="/ComposedMiddleware" xlink:title="ComposedMiddleware">
<path fill="none" stroke="black" stroke-width="3" d="M528,-108C528,-108 336,-108 336,-108 330,-108 324,-102 324,-96 324,-96 324,-84 324,-84 324,-78 330,-72 336,-72 336,-72 528,-72 528,-72 534,-72 540,-78 540,-84 540,-84 540,-96 540,-96 540,-102 534,-108 528,-108"/>
<text text-anchor="middle" x="432" y="-86.3" font-family="Menlo" font-size="14.00">ComposedMiddleware</text>
</a>
</g>
</g>
<!-- Middleware -->
<g id="node2" class="node protocol">
<title>Middleware</title>
<path fill="none" stroke="black" d="M528,-36C528,-36 336,-36 336,-36 330,-36 324,-30 324,-24 324,-24 324,-12 324,-12 324,-6 330,0 336,0 336,0 528,0 528,0 534,0 540,-6 540,-12 540,-12 540,-24 540,-24 540,-30 534,-36 528,-36"/>
<text text-anchor="middle" x="432" y="-14.3" font-family="Menlo" font-size="14.00">Middleware</text>
</g>
<!-- ComposedMiddleware&#45;&gt;Middleware -->
<g id="edge1" class="edge conformsTo">
<title>ComposedMiddleware&#45;&gt;Middleware</title>
<path fill="none" stroke="black" d="M432,-71.7C432,-63.98 432,-54.71 432,-46.11"/>
<polygon fill="black" stroke="black" points="435.5,-46.1 432,-36.1 428.5,-46.1 435.5,-46.1"/>
</g>
</g>
</svg>


    <figcaption hidden>Inheritance graph for ComposedMiddleware.</figcaption>
</figure>
        <h3>Conforms To</h3>
<dl>
    <dt class="protocol"><code><a href="/Middleware">Middleware</a></code></dt>
<dd><p>⛓ <code>Middleware</code> is a plugin, or a composition of several plugins, that are assigned to the <code>ReduxStoreProtocol</code> pipeline in order to handle each
action received (<code>InputActionType</code>), to execute side-effects in response, and eventually dispatch more actions (<code>OutputActionType</code>) in the process.
This happens before the <code>Reducer</code> to do its job.</p>
</dd>
</dl>
</section>
    <section id="initializers">
        <h2>Initializers</h2>

        <div role="article" class="initializer" id="composedmiddleware.init()">
    <h3>
        <code>init()</code>
    </h3>
    <html><body><pre class="highlight"><code><span class="keyword">public</span> <span class="keyword">init</span>()</code></pre></body></html>
<div class="summary" role="doc-abstract">
    <p>Default initializer for <code>ComposedMiddleware</code>, use this only if you don't like custom operators, otherwise create a <code>ComposedMiddleware</code> by composing two or more middlewares using the diamond operator, as shown below:</p>

</div>
<div class="discussion">
    <html><body><pre class="highlight"><code><span class="keyword">let</span> <span class="variable">composedMiddleware</span> = <span class="variable">firstMiddleware</span> &lt;&gt; <span class="variable">secondMiddleware</span>
</code></pre></body></html>
</div>
</div>
    </section>
    <section id="properties">
        <h2>Properties</h2>

        <div role="article" class="variable" id="composedmiddleware.middlewares">
    <h3>
        <code>middlewares</code>
    </h3>
    <html><body><pre class="highlight"><code><span class="keyword">var</span> <span class="variable">middlewares</span>: [<a href="/AnyMiddleware"><span class="type">AnyMiddleware</span></a>&lt;<span class="type">InputActionType</span>, <span class="type">OutputActionType</span>, <span class="type">StateType</span>&gt;]</code></pre></body></html>
</div>
    </section>
    <section id="methods">
        <h2>Methods</h2>

        <div role="article" class="function" id="composedmiddleware.append(middleware:)">
    <h3>
        <code>append(middleware:​)</code>
    </h3>
    <html><body><pre class="highlight"><code><span class="keyword">public</span> <span class="attribute">mutating</span> <span class="keyword">func</span> <span class="function">append</span>&lt;<span class="variable">M</span>: <a href="/Middleware"><span class="type">Middleware</span></a>&gt;(<span class="variable">middleware</span>: <span class="type">M</span>) <span class="keyword">where</span> <span class="type">M</span>.<span class="type">InputActionType</span> == <span class="type">InputActionType</span>, <span class="type">M</span>.<span class="type">OutputActionType</span> == <span class="type">OutputActionType</span>, <span class="type">M</span>.<span class="type">StateType</span> == <span class="type">StateType</span></code></pre></body></html>
<div class="summary" role="doc-abstract">
    <p>Appends a new middleware to end of the composition (inner chain). Use this only if you don't like custom operators, otherwise create a <code>ComposedMiddleware</code> append more middlewares to the composition by using the diamond operator, as shown below:</p>

</div>
<div class="discussion">
    <html><body><pre class="highlight"><code><span class="keyword">let</span> <span class="variable">composedOfThreeMiddlewares</span> = <span class="variable">composedOfTwoMiddlewares</span> &lt;&gt; <span class="variable">thirdMiddleware</span>
</code></pre></body></html>
<p>Or</p>

<html><body><pre class="highlight"><code><span class="keyword">let</span> <span class="variable">composedOfThreeMiddlewares</span> = <span class="variable">firstMiddleware</span> &lt;&gt; <span class="variable">secondMiddleware</span> &lt;&gt; <span class="variable">thirdMiddleware</span>
</code></pre></body></html>
</div>
</div>
<div role="article" class="function" id="composedmiddleware.receivecontext(getstate:output:)">
    <h3>
        <code>receive​Context(get​State:​output:​)</code>
    </h3>
    <html><body><pre class="highlight"><code><span class="keyword">public</span> <span class="keyword">func</span> <span class="function">receiveContext</span>(<span class="variable">getState</span>: <span class="attribute">@</span><span class="attribute">escaping</span> () -&gt; <span class="type">StateType</span>, <span class="variable">output</span>: <a href="/AnyActionHandler"><span class="type">AnyActionHandler</span></a>&lt;<span class="type">OutputActionType</span>&gt;)</code></pre></body></html>
</div>
<div role="article" class="function" id="composedmiddleware.handle(action:from:afterreducer:)">
    <h3>
        <code>handle(action:​from:​after​Reducer:​)</code>
    </h3>
    <html><body><pre class="highlight"><code><span class="keyword">public</span> <span class="keyword">func</span> <span class="function">handle</span>(<span class="variable">action</span>: <span class="type">InputActionType</span>, <span class="variable">from</span> <span class="variable">dispatcher</span>: <a href="/ActionSource"><span class="type">ActionSource</span></a>, <span class="variable">afterReducer</span>: <span class="keyword">inout</span> <a href="/AfterReducer"><span class="type">AfterReducer</span></a>)</code></pre></body></html>
<div class="summary" role="doc-abstract">
    <p>Handles the incoming actions. The <code>ComposedMiddleware</code> will forward each action to all its internal middlewares, in
the order as they were composed together, and when all of them are done, the <code>ActionType</code> will be forwarded to the
next middleware in the chain, or to the reducer pipeline in case this is the last middleware.</p>

</div>
<div class="discussion">
    <p>The internal middlewares in this <code>ComposedMiddleware</code> container may trigger additional actions, as any middleware,
and in this case the actions will be forwarded to the store by using the <code>context</code> property or the parent composed
middleware object.</p>

</div>
<h4>Parameters</h4>

<table class="parameters">
  <thead hidden>
  <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
  </tr>
  </thead>
  <tbody>
    <tr>
    <th>action</th>
    <td><code class="type">Input​Action​Type</code></td></td>
    <td><ul>
<li>action: the action to be handled</li>
</ul>
</td>
</tr>
<tr>
    <th>next</th>
    <td></td></td>
    <td><ul>
<li>next: opportunity to call the next middleware in the chain and, eventually, the reducer pipeline. Call it only once, not more or less than once. Call it from the same thread and runloop where the handle function is executed, never from a completion handler or dispatch queue block. In case you don't need to compare state before and after it's changed from the reducers, please consider to add a <code>defer</code> block with <code>next()</code> on it, at the beginning of <code>handle</code> function.</li>
</ul>
</td>
</tr>
  </tbody>
</table>
</div>
    </section>



        </article>
    </main>

    <footer>
        <p>
    Generated on <time datetime="2020-05-29T03:19:03+0200">29. May 2020</time> using <a href="https://github.com/SwiftDocOrg/swift-doc">swift-doc</a> <span class="version">1.0.0-beta.3</span>.
</p>
    </footer>
</body>
</html>
